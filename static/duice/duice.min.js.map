{"version":3,"file":"duice.min.js","sources":["Configuration.js","common.js","DataElementFactory.js","Observable.js","DataElement.js","event/DataEvent.js","DataHandler.js","format/StringFormat.js","format/NumberFormat.js","format/DateFormat.js","format/FormatFactory.js","ObjectElement.js","event/PropertyChangeEvent.js","ObjectHandler.js","event/ItemDeleteEvent.js","event/ItemSelectEvent.js","event/ItemMoveEvent.js","event/ItemInsertEvent.js","ArrayHandler.js","ArrayProxy.js","ObjectProxy.js","ArrayElement.js","ArrayElementFactory.js","CustomElementFactory.js","ObjectElementFactory.js","DataElementRegistry.js","Initializer.js","element/ImgElement.js","element/ImgElementFactory.js","element/InputElement.js","element/InputNumberElement.js","element/InputCheckboxElement.js","element/InputDatetimeLocalElement.js","element/InputRadioElement.js","element/InputElementFactory.js","element/SelectElement.js","element/SelectElementFactory.js","element/TextareaElement.js","element/TextareaElementFactory.js","dialog/Dialog.js","index.js","dialog/AlertDialog.js","dialog/ConfirmDialog.js","CustomElement.js","dialog/PromptDialog.js","tab/TabFolder.js","tab/TabItem.js"],"sourcesContent":["export class Configuration {\n    static setNamespace(value) {\n        this.namespace = value;\n    }\n    static getNamespace() {\n        return this.namespace;\n    }\n}\nConfiguration.namespace = 'duice';\n//# sourceMappingURL=Configuration.js.map","import { Configuration } from \"./Configuration\";\nexport function getElementQuerySelector() {\n    let namespace = Configuration.getNamespace();\n    return `*[data-${namespace}-bind]:not([data-${namespace}-id])`;\n}\nexport function markInitialized(container) {\n    container.querySelectorAll(getElementQuerySelector()).forEach(element => {\n        setElementAttribute(element, 'id', '_');\n    });\n}\nexport function findVariable(context, name) {\n    // find in context\n    try {\n        let object = new Function(`return this.${name};`).call(context);\n        if (object) {\n            return object;\n        }\n    }\n    catch (ignore) { }\n    // find in global\n    try {\n        let object = new Function(`return ${name};`).call(null);\n        if (object) {\n            return object;\n        }\n    }\n    catch (ignore) { }\n    // throw error\n    console.warn(`Object[${name}] is not found`);\n    return undefined;\n}\nexport function runCode(code, htmlElement, context) {\n    try {\n        let args = [];\n        let values = [];\n        for (let property in context) {\n            args.push(property);\n            values.push(context[property]);\n        }\n        return Function(...args, code).call(htmlElement, ...values);\n    }\n    catch (e) {\n        console.error(code, e);\n        throw e;\n    }\n}\nexport function runIfCode(htmlElement, context) {\n    let ifClause = getElementAttribute(htmlElement, 'if');\n    if (ifClause) {\n        let result = runCode(ifClause, htmlElement, context);\n        if (!result) {\n            htmlElement.hidden = true;\n        }\n        else {\n            htmlElement.hidden = false;\n        }\n    }\n}\nexport function runExecuteCode(htmlElement, context) {\n    let script = getElementAttribute(htmlElement, 'execute');\n    if (script) {\n        runCode(script, htmlElement, context);\n    }\n}\nexport function hasElementAttribute(htmlElement, name) {\n    let namespace = Configuration.getNamespace();\n    return htmlElement.hasAttribute(`data-${namespace}-${name}`);\n}\nexport function getElementAttribute(htmlElement, name) {\n    let namespace = Configuration.getNamespace();\n    return htmlElement.getAttribute(`data-${namespace}-${name}`);\n}\nexport function setElementAttribute(htmlElement, name, value) {\n    let namespace = Configuration.getNamespace();\n    htmlElement.setAttribute(`data-${namespace}-${name}`, value);\n}\nexport function assert(condition, message) {\n    console.assert(condition, message);\n    if (!condition) {\n        throw new Error(message || 'Assertion Failed');\n    }\n}\n//# sourceMappingURL=common.js.map","export class DataElementFactory {\n}\n//# sourceMappingURL=DataElementFactory.js.map","export class Observable {\n    constructor() {\n        this.observers = [];\n        this.notifyEnabled = true;\n    }\n    addObserver(observer) {\n        this.observers.push(observer);\n    }\n    removeObserver(observer) {\n        for (let i = 0, size = this.observers.length; i < size; i++) {\n            if (this.observers[i] === observer) {\n                this.observers.splice(i, 1);\n                return;\n            }\n        }\n    }\n    suspendNotify() {\n        this.notifyEnabled = false;\n    }\n    resumeNotify() {\n        this.notifyEnabled = true;\n    }\n    notifyObservers(dataEvent) {\n        if (this.notifyEnabled) {\n            this.observers.forEach(observer => {\n                observer.update(this, dataEvent);\n            });\n        }\n    }\n}\n//# sourceMappingURL=Observable.js.map","import { assert, setElementAttribute } from \"./common\";\nimport { Observable } from \"./Observable\";\nexport class DataElement extends Observable {\n    constructor(htmlElement, bindData, context) {\n        var _a;\n        super();\n        this.htmlElement = htmlElement;\n        this.bindData = bindData;\n        this.context = context;\n        setElementAttribute(this.htmlElement, 'id', this.generateId());\n        // bind data\n        let dataHandler = (_a = globalThis.Object.getOwnPropertyDescriptor(this.bindData, '_handler_')) === null || _a === void 0 ? void 0 : _a.value;\n        assert(dataHandler, 'DataHandler is not found');\n        this.addObserver(dataHandler);\n        dataHandler.addObserver(this);\n    }\n    generateId() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            let r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n    getHtmlElement() {\n        return this.htmlElement;\n    }\n    getContext() {\n        return this.context;\n    }\n    getBindData() {\n        return this.bindData;\n    }\n}\n//# sourceMappingURL=DataElement.js.map","export class DataEvent {\n    constructor(source) {\n        this.source = source;\n    }\n}\n//# sourceMappingURL=DataEvent.js.map","import { Observable } from \"./Observable\";\nimport { DataEvent } from \"./event/DataEvent\";\nexport class DataHandler extends Observable {\n    constructor() {\n        super();\n        this.readonlyAll = false;\n        this.readonly = new Set();\n        this.disableAll = false;\n        this.disable = new Set();\n        this.listenerEnabled = true;\n    }\n    setTarget(target) {\n        this.target = target;\n    }\n    getTarget() {\n        return this.target;\n    }\n    setReadonlyAll(readonly) {\n        this.readonlyAll = readonly;\n        if (!readonly) {\n            this.readonly.clear();\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isReadonlyAll() {\n        return this.readonlyAll;\n    }\n    setReadonly(property, readonly) {\n        if (readonly) {\n            this.readonly.add(property);\n        }\n        else {\n            this.readonly.delete(property);\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isReadonly(property) {\n        return this.readonlyAll || this.readonly.has(property);\n    }\n    setDisableAll(disable) {\n        this.disableAll = disable;\n        if (!disable) {\n            this.disable.clear();\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isDisableAll() {\n        return this.disableAll;\n    }\n    setDisable(property, disable) {\n        if (disable) {\n            this.disable.add(property);\n        }\n        else {\n            this.disable.delete(property);\n        }\n        this.notifyObservers(new DataEvent(this));\n    }\n    isDisable(property) {\n        return this.disableAll || this.disable.has(property);\n    }\n    suspendListener() {\n        this.listenerEnabled = false;\n    }\n    resumeListener() {\n        this.listenerEnabled = true;\n    }\n    checkListener(listener, event) {\n        if (this.listenerEnabled && listener) {\n            let result = listener.call(this.getTarget(), event);\n            if (result == false) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n//# sourceMappingURL=DataHandler.js.map","export class StringFormat {\n    constructor(pattern) {\n        this.pattern = pattern;\n    }\n    format(value) {\n        if (!value) {\n            return value;\n        }\n        let encodedValue = '';\n        let patternChars = this.pattern.split('');\n        let valueChars = value.split('');\n        let valueCharsPosition = 0;\n        for (let i = 0, size = patternChars.length; i < size; i++) {\n            let patternChar = patternChars[i];\n            if (patternChar === '#') {\n                encodedValue += valueChars[valueCharsPosition++] || '';\n            }\n            else {\n                encodedValue += patternChar;\n            }\n            if (valueCharsPosition >= valueChars.length) {\n                break;\n            }\n        }\n        return encodedValue;\n    }\n    parse(value) {\n        if (!value) {\n            return value;\n        }\n        let decodedValue = '';\n        let patternChars = this.pattern.split('');\n        let valueChars = value.split('');\n        let valueCharsPosition = 0;\n        for (let i = 0, size = patternChars.length; i < size; i++) {\n            let patternChar = patternChars[i];\n            if (patternChar === '#') {\n                decodedValue += valueChars[valueCharsPosition++] || '';\n            }\n            else {\n                valueCharsPosition++;\n            }\n        }\n        return decodedValue;\n    }\n}\n//# sourceMappingURL=StringFormat.js.map","export class NumberFormat {\n    constructor(scale) {\n        this.scale = 0;\n        this.scale = scale;\n    }\n    format(number) {\n        if (isNaN(Number(number))) {\n            return '';\n        }\n        number = Number(number);\n        let string;\n        if (this.scale > 0) {\n            string = String(number.toFixed(this.scale));\n        }\n        else {\n            string = String(number);\n        }\n        let reg = /(^[+-]?\\d+)(\\d{3})/;\n        while (reg.test(string)) {\n            string = string.replace(reg, '$1' + ',' + '$2');\n        }\n        return string;\n    }\n    parse(string) {\n        if (!string) {\n            return null;\n        }\n        if (string.length === 1 && /[+-]/.test(string)) {\n            string += '0';\n        }\n        string = string.replace(/,/gi, '');\n        if (isNaN(Number(string))) {\n            throw 'NaN';\n        }\n        let number = Number(string);\n        if (this.scale > 0) {\n            number = Number(number.toFixed(this.scale));\n        }\n        return number;\n    }\n}\n//# sourceMappingURL=NumberFormat.js.map","export class DateFormat {\n    constructor(pattern) {\n        this.patternRex = /yyyy|yy|MM|dd|HH|hh|mm|ss/gi;\n        this.pattern = pattern;\n    }\n    format(string) {\n        if (!string) {\n            return '';\n        }\n        let date = new Date(string);\n        string = this.pattern.replace(this.patternRex, function ($1) {\n            switch ($1) {\n                case \"yyyy\":\n                    return date.getFullYear();\n                case \"yy\":\n                    return String(date.getFullYear() % 1000).padStart(2, '0');\n                case \"MM\":\n                    return String(date.getMonth() + 1).padStart(2, '0');\n                case \"dd\":\n                    return String(date.getDate()).padStart(2, '0');\n                case \"HH\":\n                    return String(date.getHours()).padStart(2, '0');\n                case \"hh\":\n                    return String(date.getHours() <= 12 ? date.getHours() : date.getHours() % 12).padStart(2, '0');\n                case \"mm\":\n                    return String(date.getMinutes()).padStart(2, '0');\n                case \"ss\":\n                    return String(date.getSeconds()).padStart(2, '0');\n                default:\n                    return $1;\n            }\n        });\n        return string;\n    }\n    parse(string) {\n        if (!string) {\n            return null;\n        }\n        let date = new Date(0, 0, 0, 0, 0, 0);\n        let match;\n        while ((match = this.patternRex.exec(this.pattern)) != null) {\n            let formatString = match[0];\n            let formatIndex = match.index;\n            let formatLength = formatString.length;\n            let matchValue = string.substr(formatIndex, formatLength);\n            matchValue = matchValue.padEnd(formatLength, '0');\n            switch (formatString) {\n                case 'yyyy': {\n                    let fullYear = parseInt(matchValue);\n                    date.setFullYear(fullYear);\n                    break;\n                }\n                case 'yy': {\n                    let yyValue = parseInt(matchValue);\n                    let yearPrefix = Math.floor(new Date().getFullYear() / 100);\n                    let fullYear = yearPrefix * 100 + yyValue;\n                    date.setFullYear(fullYear);\n                    break;\n                }\n                case 'MM': {\n                    let monthValue = parseInt(matchValue);\n                    date.setMonth(monthValue - 1);\n                    break;\n                }\n                case 'dd': {\n                    let dateValue = parseInt(matchValue);\n                    date.setDate(dateValue);\n                    break;\n                }\n                case 'HH': {\n                    let hoursValue = parseInt(matchValue);\n                    date.setHours(hoursValue);\n                    break;\n                }\n                case 'hh': {\n                    let hoursValue = parseInt(matchValue);\n                    date.setHours(hoursValue > 12 ? (hoursValue + 12) : hoursValue);\n                    break;\n                }\n                case 'mm': {\n                    let minutesValue = parseInt(matchValue);\n                    date.setMinutes(minutesValue);\n                    break;\n                }\n                case 'ss': {\n                    let secondsValue = parseInt(matchValue);\n                    date.setSeconds(secondsValue);\n                    break;\n                }\n            }\n        }\n        // timezone offset\n        let tzo = new Date().getTimezoneOffset() * -1, dif = tzo >= 0 ? '+' : '-', pad = function (num) {\n            return (num < 10 ? '0' : '') + num;\n        };\n        // return iso string\n        return date.getFullYear() +\n            '-' + pad(date.getMonth() + 1) +\n            '-' + pad(date.getDate()) +\n            'T' + pad(date.getHours()) +\n            ':' + pad(date.getMinutes()) +\n            ':' + pad(date.getSeconds()) +\n            dif + pad(Math.floor(Math.abs(tzo) / 60)) +\n            ':' + pad(Math.abs(tzo) % 60);\n    }\n}\n//# sourceMappingURL=DateFormat.js.map","import { StringFormat } from \"./StringFormat\";\nimport { NumberFormat } from \"./NumberFormat\";\nimport { DateFormat } from \"./DateFormat\";\nexport class FormatFactory {\n    static getFormat(format) {\n        let name;\n        let args;\n        const match = format.match(/^([a-zA-Z_][a-zA-Z0-9_]*)\\((.*)\\)$/);\n        if (match) {\n            name = match[1];\n            args = match[2].split(',').map(arg => arg.trim().replace(/^['\"]|['\"]$/g, ''));\n        }\n        if (format.startsWith('string')) {\n            return new StringFormat(args[0]);\n        }\n        if (format.startsWith('number')) {\n            return new NumberFormat(args[0]);\n        }\n        if (format.startsWith('date')) {\n            return new DateFormat(args[0]);\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=FormatFactory.js.map","import { findVariable, getElementAttribute, runExecuteCode, runIfCode } from \"./common\";\nimport { DataElement } from \"./DataElement\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { ObjectHandler } from \"./ObjectHandler\";\nimport { FormatFactory } from \"./format/FormatFactory\";\nexport class ObjectElement extends DataElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n        // attributes\n        this.property = getElementAttribute(htmlElement, 'property');\n        let format = getElementAttribute(htmlElement, 'format');\n        if (format) {\n            this.format = FormatFactory.getFormat(format);\n        }\n    }\n    getProperty() {\n        return this.property;\n    }\n    getFormat() {\n        return this.format;\n    }\n    render() {\n        // check if\n        this.checkIf();\n        if (this.property) {\n            let objectHandler = ObjectProxy.getHandler(this.getBindData());\n            // set value\n            let value = objectHandler.getValue(this.property);\n            this.setValue(value);\n            // set readonly\n            let readonly = objectHandler.isReadonly(this.property);\n            this.setReadonly(readonly);\n            // set disable\n            let disable = objectHandler.isDisable(this.property);\n            this.setDisable(disable);\n        }\n        // executes script\n        this.executeScript();\n    }\n    checkIf() {\n        let context = Object.assign({}, this.getContext());\n        let bind = getElementAttribute(this.getHtmlElement(), 'bind');\n        let bindSplit = bind.split('.');\n        if (bindSplit.length > 1) {\n            context[bindSplit[0]] = findVariable(context, bindSplit[0]);\n        }\n        else {\n            context[bind] = this.getBindData();\n        }\n        runIfCode(this.htmlElement, context);\n    }\n    executeScript() {\n        let context = Object.assign({}, this.getContext());\n        let bind = getElementAttribute(this.getHtmlElement(), 'bind');\n        let bindSplit = bind.split('.');\n        if (bindSplit.length > 1) {\n            context[bindSplit[0]] = findVariable(context, bindSplit[0]);\n        }\n        else {\n            context[bind] = this.getBindData();\n        }\n        runExecuteCode(this.htmlElement, context);\n    }\n    update(observable, event) {\n        console.debug('ObjectElement.update', observable, event);\n        // ObjectHandler\n        if (observable instanceof ObjectHandler) {\n            // check if\n            this.checkIf();\n            if (this.property) {\n                // set value\n                this.setValue(observable.getValue(this.property));\n                // set readonly\n                this.setReadonly(observable.isReadonly(this.property));\n                // set disable\n                this.setDisable(observable.isDisable(this.property));\n            }\n            // executes script\n            this.executeScript();\n        }\n    }\n    setValue(value) {\n        if (value != null) {\n            value = this.getFormat() ? this.getFormat().format(value) : value;\n            this.htmlElement.innerText = value;\n        }\n        else {\n            this.htmlElement.innerText = '';\n        }\n    }\n    getValue() {\n        let value = this.htmlElement.innerText;\n        if (value && value.trim().length > 0) {\n            value = this.getFormat() ? this.getFormat().parse(value) : value;\n        }\n        else {\n            value = null;\n        }\n        return value;\n    }\n    setReadonly(readonly) {\n        // no-op\n    }\n    setDisable(disable) {\n        // no-op\n    }\n    getIndex() {\n        let index = getElementAttribute(this.htmlElement, 'index');\n        if (index) {\n            return Number(index);\n        }\n    }\n    focus() {\n        // no-ops\n        return false;\n    }\n}\n//# sourceMappingURL=ObjectElement.js.map","import { DataEvent } from \"./DataEvent\";\nexport class PropertyChangeEvent extends DataEvent {\n    constructor(source, property, value, index) {\n        super(source);\n        this.property = property;\n        this.value = value;\n        this.index = index;\n    }\n    getProperty() {\n        return this.property;\n    }\n    getValue() {\n        return this.value;\n    }\n    getIndex() {\n        return this.index;\n    }\n}\n//# sourceMappingURL=PropertyChangeEvent.js.map","import { DataHandler } from \"./DataHandler\";\nimport { ObjectElement } from \"./ObjectElement\";\nimport { PropertyChangeEvent } from \"./event/PropertyChangeEvent\";\nexport class ObjectHandler extends DataHandler {\n    constructor() {\n        super();\n    }\n    get(target, property, receiver) {\n        return Reflect.get(target, property, receiver);\n    }\n    set(target, property, value) {\n        // change value\n        Reflect.set(target, property, value);\n        // notify\n        let event = new PropertyChangeEvent(this, property, value);\n        this.notifyObservers(event);\n        // returns\n        return true;\n    }\n    update(observable, event) {\n        console.debug(\"ObjectHandler.update\", observable, event);\n        // Element\n        if (observable instanceof ObjectElement) {\n            let property = observable.getProperty();\n            let value = observable.getValue();\n            if (this.checkListener(this.propertyChangingListener, event)) {\n                this.setValue(property, value);\n                this.checkListener(this.propertyChangedListener, event);\n            }\n        }\n        // notify\n        this.notifyObservers(event);\n    }\n    getValue(property) {\n        property = property.replace('.', '?.');\n        return new Function(`return this.${property};`).call(this.getTarget());\n    }\n    setValue(property, value) {\n        new Function('value', `this.${property} = value;`).call(this.getTarget(), value);\n    }\n    focus(property) {\n        this.observers.forEach(observer => {\n            if (observer instanceof ObjectElement) {\n                if (observer.getProperty() === property) {\n                    if (observer.focus()) {\n                        return false;\n                    }\n                }\n            }\n        });\n    }\n}\n//# sourceMappingURL=ObjectHandler.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemInsertEvent extends DataEvent {\n    constructor(source, index, items) {\n        super(source);\n        this.items = [];\n        this.index = index;\n        this.items = items;\n    }\n    getIndex() {\n        return this.index;\n    }\n    getItems() {\n        return this.items;\n    }\n}\n//# sourceMappingURL=ItemDeleteEvent.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemSelectEvent extends DataEvent {\n    constructor(source, index) {\n        super(source);\n        this.index = index;\n    }\n    getIndex() {\n        return this.index;\n    }\n}\n//# sourceMappingURL=ItemSelectEvent.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemMoveEvent extends DataEvent {\n    constructor(source, fromIndex, toIndex) {\n        super(source);\n        this.fromIndex = fromIndex;\n        this.toIndex = toIndex;\n    }\n    getFromIndex() {\n        return this.fromIndex;\n    }\n    getToIndex() {\n        return this.toIndex;\n    }\n}\n//# sourceMappingURL=ItemMoveEvent.js.map","import { DataEvent } from \"./DataEvent\";\nexport class ItemDeleteEvent extends DataEvent {\n    constructor(source, index, items) {\n        super(source);\n        this.items = [];\n        this.index = index;\n        this.items = items;\n    }\n    getIndex() {\n        return this.index;\n    }\n    getItems() {\n        return this.items;\n    }\n}\n//# sourceMappingURL=ItemInsertEvent.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataHandler } from \"./DataHandler\";\nimport { ArrayProxy } from \"./ArrayProxy\";\nimport { ArrayElement } from \"./ArrayElement\";\nimport { ItemInsertEvent } from \"./event/ItemDeleteEvent\";\nimport { ItemSelectEvent } from \"./event/ItemSelectEvent\";\nimport { DataEvent } from \"./event/DataEvent\";\nimport { ItemMoveEvent } from \"./event/ItemMoveEvent\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { ItemDeleteEvent } from \"./event/ItemInsertEvent\";\nexport class ArrayHandler extends DataHandler {\n    constructor() {\n        super();\n    }\n    get(target, property, receiver) {\n        let _this = this;\n        const value = target[property];\n        if (typeof value === 'function') {\n            // push, unshift\n            if (['push', 'unshift'].includes(property)) {\n                return function () {\n                    let index;\n                    if (property === 'push') {\n                        index = receiver['length'];\n                    }\n                    else if (property === 'unshift') {\n                        index = 0;\n                    }\n                    let rows = [];\n                    for (let i in arguments) {\n                        rows.push(arguments[i]);\n                    }\n                    _this.insertItem(target, index, ...rows);\n                    return target.length;\n                };\n            }\n            // splice\n            if (['splice'].includes(property)) {\n                return function () {\n                    var arguments_1 = arguments;\n                    return __awaiter(this, void 0, void 0, function* () {\n                        // parse arguments\n                        let start = arguments_1[0];\n                        let deleteCount = arguments_1[1];\n                        let deleteRows = [];\n                        for (let i = start; i < (start + deleteCount); i++) {\n                            deleteRows.push(target[i]);\n                        }\n                        let insertRows = [];\n                        for (let i = 2; i < arguments_1.length; i++) {\n                            insertRows.push(arguments_1[i]);\n                        }\n                        // delete rows\n                        if (deleteCount > 0) {\n                            _this.deleteItem(target, start, deleteCount);\n                        }\n                        // insert rows\n                        if (insertRows.length > 0) {\n                            _this.insertItem(target, start, ...insertRows);\n                        }\n                        // returns deleted rows\n                        return deleteRows;\n                    });\n                };\n            }\n            // pop, shift\n            if (['pop', 'shift'].includes(property)) {\n                return function () {\n                    return __awaiter(this, void 0, void 0, function* () {\n                        let index;\n                        if (property === 'pop') {\n                            index = receiver['length'] - 1;\n                        }\n                        else if (property === 'shift') {\n                            index = 0;\n                        }\n                        let rows = [target[index]];\n                        _this.deleteItem(target, index);\n                        return rows;\n                    });\n                };\n            }\n            // bind\n            return value.bind(target);\n        }\n        // return\n        return value;\n    }\n    set(target, property, value) {\n        Reflect.set(target, property, value);\n        if (property === 'length') {\n            this.notifyObservers(new DataEvent(this));\n        }\n        return true;\n    }\n    update(observable, event) {\n        console.debug(\"ArrayHandler.update\", observable, event);\n        // instance is array component\n        if (observable instanceof ArrayElement) {\n            // row select event\n            if (event instanceof ItemSelectEvent) {\n                this.selectedItemIndex = event.getIndex();\n                return;\n            }\n            // row move event\n            if (event instanceof ItemMoveEvent) {\n                let object = this.getTarget().splice(event.getFromIndex(), 1)[0];\n                this.getTarget().splice(event.getToIndex(), 0, object);\n            }\n        }\n        // notify observers\n        this.notifyObservers(event);\n    }\n    insertItem(arrayProxy, index, ...rows) {\n        let arrayHandler = ArrayProxy.getHandler(arrayProxy);\n        let proxyTarget = ArrayProxy.getTarget(arrayProxy);\n        rows.forEach((object, index) => {\n            if (typeof object === 'object') {\n                let objectProxy = new ObjectProxy(object);\n                let objectHandler = ObjectProxy.getHandler(objectProxy);\n                objectHandler.propertyChangingListener = this.propertyChangingListener;\n                objectHandler.propertyChangedListener = this.propertyChangedListener;\n                rows[index] = objectProxy;\n            }\n        });\n        let event = new ItemInsertEvent(this, index, rows);\n        if (arrayHandler.checkListener(arrayHandler.rowInsertingListener, event)) {\n            proxyTarget.splice(index, 0, ...rows);\n            arrayHandler.checkListener(arrayHandler.rowInsertedListener, event);\n            arrayHandler.notifyObservers(event);\n        }\n    }\n    deleteItem(arrayProxy, index, size) {\n        let arrayHandler = ArrayProxy.getHandler(arrayProxy);\n        let proxyTarget = ArrayProxy.getTarget(arrayProxy);\n        let sliceBegin = index;\n        let sliceEnd = (size ? index + size : index + 1);\n        let rows = proxyTarget.slice(sliceBegin, sliceEnd);\n        let event = new ItemDeleteEvent(this, index, rows);\n        if (arrayHandler.checkListener(arrayHandler.rowDeletingListener, event)) {\n            let spliceStart = index;\n            let spliceDeleteCount = (size ? size : 1);\n            proxyTarget.splice(spliceStart, spliceDeleteCount);\n            arrayHandler.checkListener(arrayHandler.rowDeletedListener, event);\n            arrayHandler.notifyObservers(event);\n        }\n    }\n    appendItem(arrayProxy, ...rows) {\n        let index = arrayProxy.length;\n        return this.insertItem(arrayProxy, index, ...rows);\n    }\n    selectItem(index) {\n        this.selectedItemIndex = index;\n        // notify row select event\n        let rowSelectEvent = new ItemSelectEvent(this, this.selectedItemIndex);\n        this.notifyObservers(rowSelectEvent);\n    }\n    getSelectedItemIndex() {\n        return this.selectedItemIndex;\n    }\n}\n//# sourceMappingURL=ArrayHandler.js.map","import { ArrayHandler } from \"./ArrayHandler\";\nimport { assert } from \"./common\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { DataEvent } from \"./event/DataEvent\";\nexport class ArrayProxy extends globalThis.Array {\n    /**\n     * constructor\n     * @param array\n     */\n    constructor(array) {\n        super();\n        // is already proxy\n        if (ArrayProxy.isProxy(array)) {\n            return array;\n        }\n        // array handler\n        let arrayHandler = new ArrayHandler();\n        // copy array elements\n        if (globalThis.Array.isArray(array)) {\n            for (let i = 0; i < array.length; i++) {\n                if (typeof array[i] === 'object') {\n                    array[i] = new ObjectProxy(array[i]);\n                }\n            }\n        }\n        // create proxy\n        let arrayProxy = new Proxy(array, arrayHandler);\n        arrayHandler.setTarget(array);\n        // set property\n        ArrayProxy.setHandler(arrayProxy, arrayHandler);\n        ArrayProxy.setTarget(arrayProxy, array);\n        // save\n        ArrayProxy.save(arrayProxy);\n        // returns\n        return arrayProxy;\n    }\n    static isProxy(array) {\n        return array.hasOwnProperty('_target_');\n    }\n    static setTarget(arrayProxy, target) {\n        globalThis.Object.defineProperty(arrayProxy, '_target_', {\n            value: target,\n            writable: true\n        });\n    }\n    static getTarget(arrayProxy) {\n        return globalThis.Object.getOwnPropertyDescriptor(arrayProxy, '_target_').value;\n    }\n    static setHandler(arrayProxy, arrayHandler) {\n        globalThis.Object.defineProperty(arrayProxy, '_handler_', {\n            value: arrayHandler,\n            writable: true\n        });\n    }\n    static getHandler(arrayProxy) {\n        let handler = globalThis.Object.getOwnPropertyDescriptor(arrayProxy, '_handler_').value;\n        assert(handler, 'handler is not found');\n        return handler;\n    }\n    /**\n     * Assigns array to array proxy\n     * @param arrayProxy\n     * @param array\n     */\n    static assign(arrayProxy, array) {\n        let arrayHandler = this.getHandler(arrayProxy);\n        try {\n            // suspend\n            arrayHandler.suspendListener();\n            arrayHandler.suspendNotify();\n            // clears elements\n            arrayProxy.length = 0;\n            // creates elements\n            for (let index = 0; index < array.length; index++) {\n                let object = array[index];\n                // if not object, skip\n                if (typeof object !== 'object') {\n                    continue;\n                }\n                let objectProxy = new ObjectProxy(object);\n                arrayProxy[index] = objectProxy;\n                // readonly\n                ObjectProxy.setReadonlyAll(objectProxy, arrayHandler.isReadonlyAll());\n                arrayHandler.readonly.forEach(property => {\n                    ObjectProxy.setReadonly(objectProxy, property, true);\n                });\n                // disable\n                ObjectProxy.setDisableAll(objectProxy, arrayHandler.isDisableAll());\n                arrayHandler.disable.forEach(property => {\n                    ObjectProxy.setDisable(objectProxy, property, true);\n                });\n                // add listener\n                ObjectProxy.onPropertyChanging(objectProxy, arrayHandler.propertyChangingListener);\n                ObjectProxy.onPropertyChanged(objectProxy, arrayHandler.propertyChangedListener);\n            }\n        }\n        finally {\n            // resume\n            arrayHandler.resumeListener();\n            arrayHandler.resumeNotify();\n        }\n        // notify observers\n        arrayHandler.notifyObservers(new DataEvent(this));\n    }\n    /**\n     * Clears array elements\n     * @param arrayProxy\n     */\n    static clear(arrayProxy) {\n        let arrayHandler = this.getHandler(arrayProxy);\n        try {\n            // suspend\n            arrayHandler.suspendListener();\n            arrayHandler.suspendNotify();\n            // clear element\n            arrayProxy.length = 0;\n        }\n        finally {\n            // resume\n            arrayHandler.resumeListener();\n            arrayHandler.resumeNotify();\n        }\n        // notify observers\n        arrayHandler.notifyObservers(new DataEvent(this));\n    }\n    /**\n     * Save array proxy\n     * @param arrayProxy\n     */\n    static save(arrayProxy) {\n        let origin = JSON.stringify(arrayProxy);\n        globalThis.Object.defineProperty(arrayProxy, '_origin_', {\n            value: origin,\n            writable: true\n        });\n    }\n    /**\n     * Reset array proxy\n     * @param arrayProxy\n     */\n    static reset(arrayProxy) {\n        let origin = JSON.parse(globalThis.Object.getOwnPropertyDescriptor(arrayProxy, '_origin_').value);\n        this.assign(arrayProxy, origin);\n    }\n    static setReadonly(arrayProxy, property, readonly) {\n        this.getHandler(arrayProxy).setReadonly(property, readonly);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setReadonly(objectProxy, property, readonly);\n        });\n    }\n    static isReadonly(arrayProxy, property) {\n        return this.getHandler(arrayProxy).isReadonly(property);\n    }\n    static setReadonlyAll(arrayProxy, readonly) {\n        this.getHandler(arrayProxy).setReadonlyAll(readonly);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setReadonlyAll(objectProxy, readonly);\n        });\n    }\n    static isReadonlyAll(arrayProxy) {\n        return this.getHandler(arrayProxy).isReadonlyAll();\n    }\n    static setDisable(arrayProxy, property, disable) {\n        this.getHandler(arrayProxy).setDisable(property, disable);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setDisable(objectProxy, property, disable);\n        });\n    }\n    static isDisable(arrayProxy, property) {\n        return this.getHandler(arrayProxy).isDisable(property);\n    }\n    static setDisableAll(arrayProxy, disable) {\n        this.getHandler(arrayProxy).setDisableAll(disable);\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.setDisableAll(objectProxy, disable);\n        });\n    }\n    static isDisableAll(arrayProxy) {\n        return this.getHandler(arrayProxy).isDisableAll();\n    }\n    static selectItem(arrayProxy, index) {\n        return this.getHandler(arrayProxy).selectItem(index);\n    }\n    static getSelectedItemIndex(arrayProxy) {\n        return this.getHandler(arrayProxy).getSelectedItemIndex();\n    }\n    static onPropertyChanging(arrayProxy, listener) {\n        this.getHandler(arrayProxy).propertyChangingListener = listener;\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.getHandler(objectProxy).propertyChangingListener = listener;\n        });\n    }\n    static onPropertyChanged(arrayProxy, listener) {\n        this.getHandler(arrayProxy).propertyChangedListener = listener;\n        arrayProxy.forEach(objectProxy => {\n            ObjectProxy.getHandler(objectProxy).propertyChangedListener = listener;\n        });\n    }\n    static onRowInserting(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowInsertingListener = listener;\n    }\n    static onRowInserted(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowInsertedListener = listener;\n    }\n    static onRowDeleting(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowDeletingListener = listener;\n    }\n    static onRowDeleted(arrayProxy, listener) {\n        this.getHandler(arrayProxy).rowDeletedListener = listener;\n    }\n}\n//# sourceMappingURL=ArrayProxy.js.map","import { ObjectHandler } from \"./ObjectHandler\";\nimport { ArrayProxy } from \"./ArrayProxy\";\nimport { assert } from \"./common\";\nimport { DataEvent } from \"./event/DataEvent\";\nexport class ObjectProxy extends globalThis.Object {\n    /**\n     * constructor\n     * @param object\n     */\n    constructor(object) {\n        super();\n        // is already proxy\n        if (ObjectProxy.isProxy(object)) {\n            return object;\n        }\n        // object handler\n        let objectHandler = new ObjectHandler();\n        // copy property\n        for (let name in object) {\n            let value = object[name];\n            // value is array\n            if (Array.isArray(value)) {\n                let arrayProxy = new ArrayProxy(value);\n                ArrayProxy.getHandler(arrayProxy).addObserver(objectHandler);\n                object[name] = arrayProxy;\n                continue;\n            }\n            // value is object\n            if (value != null && typeof value === 'object') {\n                let objectProxy = new ObjectProxy(value);\n                ObjectProxy.getHandler(objectProxy).addObserver(objectHandler);\n                object[name] = objectProxy;\n                continue;\n            }\n            // value is primitive\n            object[name] = value;\n        }\n        // delete not exists property\n        for (let name in object) {\n            if (!Object.keys(object).includes(name)) {\n                delete this[name];\n            }\n        }\n        // creates proxy\n        let objectProxy = new Proxy(object, objectHandler);\n        objectHandler.setTarget(object);\n        // set property\n        ObjectProxy.setHandler(objectProxy, objectHandler);\n        ObjectProxy.setTarget(objectProxy, object);\n        // save\n        ObjectProxy.save(objectProxy);\n        // returns\n        return objectProxy;\n    }\n    static isProxy(object) {\n        return object.hasOwnProperty('_target_');\n    }\n    static setTarget(objectProxy, target) {\n        globalThis.Object.defineProperty(objectProxy, '_target_', {\n            value: target,\n            writable: true\n        });\n    }\n    static getTarget(objectProxy) {\n        return globalThis.Object.getOwnPropertyDescriptor(objectProxy, '_target_').value;\n    }\n    static setHandler(objectProxy, objectHandler) {\n        globalThis.Object.defineProperty(objectProxy, '_handler_', {\n            value: objectHandler,\n            writable: true\n        });\n    }\n    static getHandler(objectProxy) {\n        let handler = globalThis.Object.getOwnPropertyDescriptor(objectProxy, '_handler_').value;\n        assert(handler, 'handler is not found');\n        return handler;\n    }\n    /**\n     * Assign object to object proxy\n     * @param objectProxy\n     * @param object\n     */\n    static assign(objectProxy, object) {\n        let objectHandler = this.getHandler(objectProxy);\n        try {\n            // suspend\n            objectHandler.suspendListener();\n            objectHandler.suspendNotify();\n            // loop object properties\n            for (let name in object) {\n                let value = object[name];\n                // source value is array\n                if (Array.isArray(value)) {\n                    if (Array.isArray(objectProxy[name])) {\n                        ArrayProxy.assign(objectProxy[name], value);\n                    }\n                    else {\n                        objectProxy[name] = new ArrayProxy(value);\n                    }\n                    continue;\n                }\n                // source value is object\n                if (value != null && typeof value === 'object') {\n                    if (objectProxy[name] != null && typeof objectProxy[name] === 'object') {\n                        ObjectProxy.assign(objectProxy[name], value);\n                    }\n                    else {\n                        let objectProxy = new ObjectProxy(value);\n                        ObjectProxy.getHandler(objectProxy).addObserver(objectHandler);\n                        objectProxy[name] = objectProxy;\n                    }\n                    continue;\n                }\n                // source value is primitive\n                objectProxy[name] = value;\n            }\n        }\n        finally {\n            // resume\n            objectHandler.resumeListener();\n            objectHandler.resumeNotify();\n        }\n        // notify observers\n        objectHandler.notifyObservers(new DataEvent(this));\n    }\n    /**\n     * Clear object properties\n     * @param objectProxy\n     */\n    static clear(objectProxy) {\n        let objectHandler = this.getHandler(objectProxy);\n        try {\n            // suspend\n            objectHandler.suspendListener();\n            objectHandler.suspendNotify();\n            // clear properties\n            for (let name in objectProxy) {\n                let value = objectProxy[name];\n                if (Array.isArray(value)) {\n                    ArrayProxy.clear(value);\n                    continue;\n                }\n                if (value != null && typeof value === 'object') {\n                    ObjectProxy.clear(value);\n                    continue;\n                }\n                objectProxy[name] = null;\n            }\n        }\n        finally {\n            // resume\n            objectHandler.resumeListener();\n            objectHandler.resumeNotify();\n        }\n        // notify observers\n        objectHandler.notifyObservers(new DataEvent(this));\n    }\n    /**\n     * Save object properties\n     * @param objectProxy\n     */\n    static save(objectProxy) {\n        let origin = JSON.stringify(objectProxy);\n        globalThis.Object.defineProperty(objectProxy, '_origin_', {\n            value: origin,\n            writable: true\n        });\n    }\n    /**\n     * Reset object properties\n     * @param objectProxy\n     */\n    static reset(objectProxy) {\n        let origin = JSON.parse(globalThis.Object.getOwnPropertyDescriptor(objectProxy, '_origin_').value);\n        this.assign(objectProxy, origin);\n    }\n    /**\n     * Set property to be readonly\n     * @param objectProxy\n     * @param property\n     * @param readonly\n     */\n    static setReadonly(objectProxy, property, readonly) {\n        this.getHandler(objectProxy).setReadonly(property, readonly);\n    }\n    /**\n     * Get whether property is readonly\n     * @param objectProxy\n     * @param property\n     */\n    static isReadonly(objectProxy, property) {\n        return this.getHandler(objectProxy).isReadonly(property);\n    }\n    /**\n     * Set all properties to be readonly\n     * @param objectProxy\n     * @param readonly\n     */\n    static setReadonlyAll(objectProxy, readonly) {\n        this.getHandler(objectProxy).setReadonlyAll(readonly);\n    }\n    /**\n     * Get whether all properties are readonly\n     * @param objectProxy\n     */\n    static isReadonlyAll(objectProxy) {\n        return this.getHandler(objectProxy).isReadonlyAll();\n    }\n    /**\n     * Set object to be disabled\n     * @param objectProxy\n     * @param property\n     * @param disable\n     */\n    static setDisable(objectProxy, property, disable) {\n        this.getHandler(objectProxy).setDisable(property, disable);\n    }\n    /**\n     * Get whether property is disabled\n     * @param objectProxy\n     * @param property\n     */\n    static isDisable(objectProxy, property) {\n        return this.getHandler(objectProxy).isDisable(property);\n    }\n    /**\n     * Set all properties to be disabled\n     * @param objectProxy\n     * @param disable\n     */\n    static setDisableAll(objectProxy, disable) {\n        this.getHandler(objectProxy).setDisableAll(disable);\n    }\n    /**\n     * Get whether all properties are disabled\n     * @param objectProxy\n     */\n    static isDisableAll(objectProxy) {\n        return this.getHandler(objectProxy).isDisableAll();\n    }\n    /**\n     * Set property to be focused\n     * @param objectProxy\n     * @param property\n     */\n    static focus(objectProxy, property) {\n        this.getHandler(objectProxy).focus(property);\n    }\n    /**\n     * Set readonly before changing event listener\n     * @param objectProxy\n     * @param listener\n     */\n    static onPropertyChanging(objectProxy, listener) {\n        this.getHandler(objectProxy).propertyChangingListener = listener;\n    }\n    /**\n     * Set property after changed event listener\n     * @param objectProxy\n     * @param listener\n     */\n    static onPropertyChanged(objectProxy, listener) {\n        this.getHandler(objectProxy).propertyChangedListener = listener;\n    }\n}\n//# sourceMappingURL=ObjectProxy.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getElementAttribute, markInitialized, runExecuteCode, runIfCode, setElementAttribute } from \"./common\";\nimport { DataElement } from \"./DataElement\";\nimport { ObjectProxy } from \"./ObjectProxy\";\nimport { Initializer } from \"./Initializer\";\nimport { ArrayHandler } from \"./ArrayHandler\";\nimport { ItemSelectEvent } from \"./event/ItemSelectEvent\";\nimport { ItemMoveEvent } from \"./event/ItemMoveEvent\";\nexport class ArrayElement extends DataElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement.cloneNode(true), bindData, context);\n        this.editable = false;\n        this.slot = document.createElement('slot');\n        this.itemHtmlElements = [];\n        // attributes\n        this.loop = getElementAttribute(htmlElement, 'loop');\n        this.hierarchy = getElementAttribute(htmlElement, 'hierarchy');\n        this.editable = (getElementAttribute(htmlElement, 'editable') === 'true');\n        this.selectedItemClass = getElementAttribute(htmlElement, 'selected-item-class');\n        // replace with slot for position\n        htmlElement.replaceWith(this.slot);\n        // mark initialized (not using after clone as templates)\n        markInitialized(htmlElement);\n    }\n    render() {\n        var _a;\n        let arrayProxy = this.getBindData();\n        // reset row elements\n        this.itemHtmlElements.forEach(rowElement => {\n            rowElement.parentNode.removeChild(rowElement);\n        });\n        this.itemHtmlElements.length = 0;\n        // loop\n        if (this.loop) {\n            let loopArgs = this.loop.split(',');\n            let itemName = loopArgs[0].trim();\n            let statusName = (_a = loopArgs[1]) === null || _a === void 0 ? void 0 : _a.trim();\n            // hierarchy loop\n            if (this.hierarchy) {\n                let hierarchyArray = this.hierarchy.split(',');\n                let idName = hierarchyArray[0];\n                let parentIdName = hierarchyArray[1];\n                //let index = -1;\n                const _this = this;\n                // visit function\n                let visit = function (array, parentId, depth) {\n                    for (let index = 0; index < array.length; index++) {\n                        const object = array[index];\n                        if (object[parentIdName] === parentId) {\n                            // context\n                            let context = Object.assign({}, _this.getContext());\n                            context[itemName] = object;\n                            context[statusName] = new ObjectProxy({\n                                index: index,\n                                count: index + 1,\n                                size: arrayProxy.length,\n                                first: (index === 0),\n                                last: (arrayProxy.length == index + 1),\n                                depth: depth\n                            });\n                            // create row element\n                            _this.createItemHtmlElement(index, object, context);\n                            // visit child elements\n                            let id = object[idName];\n                            visit(array, id, depth + 1);\n                        }\n                    }\n                };\n                // start visit\n                visit(arrayProxy, null, 0);\n            }\n            // default loop\n            else {\n                // normal\n                for (let index = 0; index < arrayProxy.length; index++) {\n                    // element data\n                    let object = arrayProxy[index];\n                    // context\n                    let context = Object.assign({}, this.getContext());\n                    context[itemName] = object;\n                    context[statusName] = new ObjectProxy({\n                        index: index,\n                        count: index + 1,\n                        size: arrayProxy.length,\n                        first: (index === 0),\n                        last: (arrayProxy.length == index + 1)\n                    });\n                    // create row element\n                    this.createItemHtmlElement(index, object, context);\n                }\n            }\n        }\n        // not loop\n        else {\n            // initialize\n            let itemHtmlElement = this.getHtmlElement().cloneNode(true);\n            let context = Object.assign({}, this.getContext());\n            Initializer.initialize(itemHtmlElement, this.getContext());\n            this.itemHtmlElements.push(itemHtmlElement);\n            // append to slot\n            // this.slot.appendChild(itemHtmlElement);\n            this.slot.parentNode.insertBefore(itemHtmlElement, this.slot);\n            // check if\n            runIfCode(itemHtmlElement, context);\n            // execute script\n            runExecuteCode(itemHtmlElement, context);\n        }\n    }\n    createItemHtmlElement(index, object, context) {\n        // clones row elements\n        let itemHtmlElement = this.getHtmlElement().cloneNode(true);\n        // adds embedded attribute\n        setElementAttribute(itemHtmlElement, 'index', index.toString());\n        // editable\n        let _this = this;\n        if (this.editable) {\n            itemHtmlElement.setAttribute('draggable', 'true');\n            itemHtmlElement.addEventListener('dragstart', function (e) {\n                let fromIndex = getElementAttribute(this, 'index');\n                e.dataTransfer.setData(\"text\", fromIndex);\n            });\n            itemHtmlElement.addEventListener('dragover', function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            });\n            itemHtmlElement.addEventListener('drop', function (e) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    let fromIndex = parseInt(e.dataTransfer.getData('text'));\n                    let toIndex = parseInt(getElementAttribute(this, 'index'));\n                    let itemMoveEvent = new ItemMoveEvent(_this, fromIndex, toIndex);\n                    _this.notifyObservers(itemMoveEvent);\n                });\n            });\n        }\n        // initializes row element\n        Initializer.initialize(itemHtmlElement, context, index);\n        this.itemHtmlElements.push(itemHtmlElement);\n        // insert into slot\n        this.slot.parentNode.insertBefore(itemHtmlElement, this.slot);\n        // check if clause\n        runIfCode(itemHtmlElement, context);\n        // execute script\n        runExecuteCode(itemHtmlElement, context);\n        // selectable\n        itemHtmlElement.addEventListener('click', e => {\n            // selected class\n            if (this.selectedItemClass) {\n                this.itemHtmlElements.forEach(element => {\n                    element.classList.remove(this.selectedItemClass);\n                });\n                e.currentTarget.classList.add(this.selectedItemClass);\n                e.stopPropagation();\n            }\n            // trigger row select event\n            let rowSelectEvent = new ItemSelectEvent(this, index);\n            this.notifyObservers(rowSelectEvent);\n        });\n    }\n    update(observable, event) {\n        console.debug('ArrayElement.update', observable, event);\n        if (observable instanceof ArrayHandler) {\n            // row select event\n            if (event instanceof ItemSelectEvent) {\n                if (this.selectedItemClass) {\n                    this.itemHtmlElements.forEach(el => el.classList.remove(this.selectedItemClass));\n                    let index = event.getIndex();\n                    if (index >= 0) {\n                        this.itemHtmlElements.forEach(itemHtmlElement => {\n                            if (itemHtmlElement.dataset.duiceIndex === event.getIndex().toString()) {\n                                itemHtmlElement.classList.add(this.selectedItemClass);\n                            }\n                        });\n                    }\n                }\n                return;\n            }\n            // render\n            this.render();\n        }\n    }\n}\n//# sourceMappingURL=ArrayElement.js.map","import { DataElementFactory } from \"./DataElementFactory\";\nimport { ArrayElement } from \"./ArrayElement\";\nexport class ArrayElementFactory extends DataElementFactory {\n    createElement(htmlElement, bindData, context) {\n        return new ArrayElement(htmlElement, bindData, context);\n    }\n}\n//# sourceMappingURL=ArrayElementFactory.js.map","import { DataElementFactory } from \"./DataElementFactory\";\nexport class CustomElementFactory extends DataElementFactory {\n    createElement(htmlElement, bindData, context) {\n        return this.doCreateElement(htmlElement, bindData, context);\n    }\n}\n//# sourceMappingURL=CustomElementFactory.js.map","import { DataElementFactory } from \"./DataElementFactory\";\nimport { ObjectElement } from \"./ObjectElement\";\nexport class ObjectElementFactory extends DataElementFactory {\n    createElement(htmlElement, bindData, context) {\n        return new ObjectElement(htmlElement, bindData, context);\n    }\n}\n//# sourceMappingURL=ObjectElementFactory.js.map","import { ArrayElementFactory } from \"./ArrayElementFactory\";\nimport { CustomElementFactory } from \"./CustomElementFactory\";\nimport { ObjectElementFactory } from \"./ObjectElementFactory\";\nexport class DataElementRegistry {\n    static register(tagName, elementFactory) {\n        if (elementFactory instanceof ArrayElementFactory) {\n            this.arrayElementFactories.set(tagName, elementFactory);\n        }\n        else if (elementFactory instanceof ObjectElementFactory) {\n            this.objectElementFactories.set(tagName, elementFactory);\n        }\n        else if (elementFactory instanceof CustomElementFactory) {\n            this.customElementFactories.set(tagName, elementFactory);\n        }\n        // register custom html element\n        if (tagName.includes('-')) {\n            globalThis.customElements.define(tagName, class extends HTMLElement {\n            });\n        }\n    }\n    static getFactory(htmlElement, bindData, context) {\n        let tagName = htmlElement.tagName.toLowerCase();\n        // custom element\n        if (this.customElementFactories.has(tagName)) {\n            return this.customElementFactories.get(tagName);\n        }\n        // array element\n        if (Array.isArray(bindData)) {\n            if (this.arrayElementFactories.has(tagName)) {\n                return this.arrayElementFactories.get(tagName);\n            }\n            return this.defaultArrayElementFactory;\n        }\n        // object element\n        else {\n            if (this.objectElementFactories.has(tagName)) {\n                return this.objectElementFactories.get(tagName);\n            }\n            return this.defaultObjectElementFactory;\n        }\n    }\n}\nDataElementRegistry.defaultObjectElementFactory = new ObjectElementFactory();\nDataElementRegistry.defaultArrayElementFactory = new ArrayElementFactory();\nDataElementRegistry.objectElementFactories = new Map();\nDataElementRegistry.arrayElementFactories = new Map();\nDataElementRegistry.customElementFactories = new Map();\n//# sourceMappingURL=DataElementRegistry.js.map","import { findVariable, getElementAttribute, getElementQuerySelector, hasElementAttribute, setElementAttribute } from \"./common\";\nimport { DataElementRegistry } from \"./DataElementRegistry\";\nexport class Initializer {\n    static initialize(container, context, index) {\n        // scan DOM tree\n        container.querySelectorAll(getElementQuerySelector()).forEach(element => {\n            var _a, _b;\n            // if (element instanceof HTMLElement) {\n            const htmlElement = element;\n            if (!hasElementAttribute(htmlElement, 'id')) {\n                try {\n                    let bindName = getElementAttribute(htmlElement, 'bind');\n                    let bindData = findVariable(context, bindName);\n                    (_b = (_a = DataElementRegistry.getFactory(htmlElement, bindData, context)) === null || _a === void 0 ? void 0 : _a.createElement(htmlElement, bindData, context)) === null || _b === void 0 ? void 0 : _b.render();\n                    // index\n                    if (index !== undefined) {\n                        setElementAttribute(htmlElement, \"index\", index.toString());\n                    }\n                }\n                catch (e) {\n                    console.error(e, htmlElement, container, JSON.stringify(context));\n                }\n            }\n            // }\n        });\n    }\n}\n//# sourceMappingURL=Initializer.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ObjectElement } from \"../ObjectElement\";\nimport { getElementAttribute } from \"../common\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nexport class ImgElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.editable = false;\n        this.closeButtonImg = 'data:image/svg+xml;base64,' + window.btoa('<svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <path opacity=\"0.4\" d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" fill=\"#292D32\"></path> <path d=\"M13.0594 12.0001L15.3594 9.70011C15.6494 9.41011 15.6494 8.93011 15.3594 8.64011C15.0694 8.35011 14.5894 8.35011 14.2994 8.64011L11.9994 10.9401L9.69937 8.64011C9.40937 8.35011 8.92937 8.35011 8.63938 8.64011C8.34938 8.93011 8.34938 9.41011 8.63938 9.70011L10.9394 12.0001L8.63938 14.3001C8.34938 14.5901 8.34938 15.0701 8.63938 15.3601C8.78938 15.5101 8.97937 15.5801 9.16937 15.5801C9.35937 15.5801 9.54937 15.5101 9.69937 15.3601L11.9994 13.0601L14.2994 15.3601C14.4494 15.5101 14.6394 15.5801 14.8294 15.5801C15.0194 15.5801 15.2094 15.5101 15.3594 15.3601C15.6494 15.0701 15.6494 14.5901 15.3594 14.3001L13.0594 12.0001Z\" fill=\"#292D32\"></path> </g></svg>');\n        this.originSrc = String(this.getHtmlElement().src);\n        // editable\n        this.editable = (getElementAttribute(this.getHtmlElement(), 'editable') === 'true');\n        if (this.editable) {\n            // add click event listener\n            this.getHtmlElement().style.cursor = 'pointer';\n            this.getHtmlElement().addEventListener('click', event => {\n                this.changeImage();\n            });\n            // create clear button\n            this.clearButton = document.createElement('img');\n            this.clearButton.src = this.closeButtonImg;\n            this.clearButton.style.cursor = 'pointer';\n            this.clearButton.style.width = '16px';\n            this.clearButton.style.height = '16px';\n            this.clearButton.addEventListener('mouseout', event => {\n                this.hideClearImageButton();\n            }, true);\n            this.clearButton.addEventListener('click', event => {\n                this.clearImage();\n            });\n            // mouse over\n            this.getHtmlElement().addEventListener('mouseover', event => {\n                this.showClearImageButton();\n            }, true);\n            // mouse over\n            this.getHtmlElement().addEventListener('mouseout', event => {\n                // related target is overlay button\n                if (event.relatedTarget === this.clearButton) {\n                    return;\n                }\n                this.hideClearImageButton();\n            }, true);\n        }\n        // size\n        let size = getElementAttribute(this.getHtmlElement(), 'size');\n        if (size) {\n            let sizeArgs = size.split(',');\n            this.width = parseInt(sizeArgs[0].trim());\n            this.height = parseInt(sizeArgs[1].trim());\n        }\n    }\n    showClearImageButton() {\n        this.getHtmlElement().parentNode.insertBefore(this.clearButton, this.getHtmlElement().nextSibling);\n        this.clearButton.style.position = 'absolute';\n        this.clearButton.style.zIndex = '100';\n    }\n    hideClearImageButton() {\n        this.getHtmlElement().parentNode.removeChild(this.clearButton);\n    }\n    clearImage() {\n        if (this.originSrc) {\n            this.getHtmlElement().src = this.originSrc;\n        }\n        else {\n            this.getHtmlElement().src = null;\n        }\n        // notify observers\n        let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n        this.notifyObservers(event);\n    }\n    changeImage() {\n        let input = document.createElement('input');\n        input.setAttribute(\"type\", \"file\");\n        input.setAttribute(\"accept\", \"image/gif, image/jpeg, image/png\");\n        let _this = this;\n        input.addEventListener('change', function (e) {\n            let fileReader = new FileReader();\n            if (this.files && this.files[0]) {\n                fileReader.addEventListener(\"load\", (e) => __awaiter(this, void 0, void 0, function* () {\n                    let image = e.target.result;\n                    let value;\n                    if (_this.width && _this.height) {\n                        value = yield _this.convertImage(image, _this.width, _this.height);\n                    }\n                    else {\n                        value = yield _this.convertImage(image);\n                    }\n                    _this.setValue(value);\n                    // notify observers\n                    let event = new PropertyChangeEvent(_this, _this.getProperty(), _this.getValue(), _this.getIndex());\n                    _this.notifyObservers(event);\n                }));\n                fileReader.readAsDataURL(this.files[0]);\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        });\n        input.click();\n    }\n    convertImage(dataUrl, width, height) {\n        return new Promise(function (resolve, reject) {\n            try {\n                let canvas = document.createElement(\"canvas\");\n                let ctx = canvas.getContext(\"2d\");\n                let image = new Image();\n                image.onload = function () {\n                    if (width && height) {\n                        canvas.width = width;\n                        canvas.height = height;\n                        ctx.drawImage(image, 0, 0, width, height);\n                    }\n                    else {\n                        canvas.width = image.naturalWidth;\n                        canvas.height = image.naturalHeight;\n                        ctx.drawImage(image, 0, 0);\n                    }\n                    let dataUrl = canvas.toDataURL(\"image/png\");\n                    resolve(dataUrl);\n                };\n                image.src = dataUrl;\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    setValue(value) {\n        if (value) {\n            this.getHtmlElement().src = value;\n        }\n        else {\n            this.getHtmlElement().src = this.originSrc;\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().src;\n        if (value === this.originSrc) {\n            return null;\n        }\n        else {\n            return value;\n        }\n    }\n    setReadonly(readonly) {\n        this.getHtmlElement().style.pointerEvents = (readonly ? 'none' : 'unset');\n    }\n    setDisable(disable) {\n        this.getHtmlElement().style.pointerEvents = (disable ? 'none' : 'unset');\n    }\n}\n//# sourceMappingURL=ImgElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nimport { ImgElement } from \"./ImgElement\";\nexport class ImgElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        return new ImgElement(element, bindData, context);\n    }\n}\n(() => {\n    // register factory instance\n    DataElementRegistry.register('img', new ImgElementFactory());\n})();\n//# sourceMappingURL=ImgElementFactory.js.map","import { ObjectElement } from \"../ObjectElement\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nexport class InputElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        // adds change listener\n        this.getHtmlElement().addEventListener('change', e => {\n            let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n            this.notifyObservers(event);\n        }, true);\n        // turn off autocomplete\n        this.getHtmlElement().setAttribute('autocomplete', 'off');\n    }\n    setValue(value) {\n        if (value != null) {\n            value = this.getFormat() ? this.getFormat().format(value) : value;\n        }\n        else {\n            value = '';\n        }\n        this.getHtmlElement().value = value;\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (value) {\n            value = this.getFormat() ? this.getFormat().parse(value) : value;\n        }\n        else {\n            value = null;\n        }\n        return value;\n    }\n    setReadonly(readonly) {\n        this.getHtmlElement().readOnly = readonly;\n    }\n    setDisable(disable) {\n        if (disable) {\n            this.getHtmlElement().setAttribute('disabled', 'disabled');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('disabled');\n        }\n    }\n    focus() {\n        this.getHtmlElement().focus();\n        return true;\n    }\n}\n//# sourceMappingURL=InputElement.js.map","import { InputElement } from \"./InputElement\";\nexport class InputNumberElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        // changes type and style\n        this.getHtmlElement().setAttribute('type', 'text');\n        this.getHtmlElement().style.textAlign = 'right';\n        // prevents invalid key press\n        this.getHtmlElement().addEventListener('keypress', event => {\n            if (/[\\d|\\.|,]/.test(event.key) === false) {\n                event.preventDefault();\n            }\n        });\n    }\n    getValue() {\n        let value = super.getValue();\n        return Number(value);\n    }\n}\n//# sourceMappingURL=InputNumberElement.js.map","import { getElementAttribute } from \"../common\";\nimport { InputElement } from \"./InputElement\";\nexport class InputCheckboxElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.trueValue = true;\n        this.falseValue = false;\n        // true false value\n        let trueValue = getElementAttribute(this.getHtmlElement(), 'true-value');\n        this.trueValue = trueValue ? trueValue : this.trueValue;\n        let falseValue = getElementAttribute(this.getHtmlElement(), 'false-value');\n        this.falseValue = falseValue ? falseValue : this.falseValue;\n    }\n    setValue(value) {\n        if (value === this.trueValue) {\n            this.getHtmlElement().checked = true;\n        }\n        else {\n            this.htmlElement.checked = false;\n        }\n    }\n    getValue() {\n        if (this.htmlElement.checked) {\n            return this.trueValue;\n        }\n        else {\n            return this.falseValue;\n        }\n    }\n    disableClick(event) {\n        event.preventDefault();\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            this.getHtmlElement().addEventListener('click', this.disableClick);\n        }\n        else {\n            this.getHtmlElement().removeEventListener('click', this.disableClick);\n        }\n    }\n}\n//# sourceMappingURL=InputCheckboxElement.js.map","import { InputElement } from \"./InputElement\";\nimport { DateFormat } from \"../format/DateFormat\";\nexport class InputDatetimeLocalElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.dateFormat = new DateFormat('yyyy-MM-ddTHH:mm');\n    }\n    setValue(value) {\n        if (value) {\n            this.getHtmlElement().value = this.dateFormat.format(value);\n        }\n        else {\n            this.getHtmlElement().value = '';\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (value) {\n            return new Date(value).toISOString();\n        }\n        else {\n            return null;\n        }\n    }\n}\n//# sourceMappingURL=InputDatetimeLocalElement.js.map","import { InputElement } from \"./InputElement\";\nexport class InputRadioElement extends InputElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n    }\n    setValue(value) {\n        this.getHtmlElement().checked = (this.getHtmlElement().value === value);\n    }\n    getValue() {\n        return this.getHtmlElement().value;\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            this.getHtmlElement().style.pointerEvents = 'none';\n        }\n        else {\n            this.getHtmlElement().style.pointerEvents = '';\n        }\n    }\n}\n//# sourceMappingURL=InputRadioElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { InputElement } from \"./InputElement\";\nimport { InputNumberElement } from \"./InputNumberElement\";\nimport { InputCheckboxElement } from \"./InputCheckboxElement\";\nimport { InputDatetimeLocalElement } from \"./InputDatetimeLocalElement\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nimport { InputRadioElement } from \"./InputRadioElement\";\nexport class InputElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        let type = element.getAttribute('type');\n        switch (type) {\n            case 'number':\n                return new InputNumberElement(element, bindData, context);\n            case 'checkbox':\n                return new InputCheckboxElement(element, bindData, context);\n            case 'radio':\n                return new InputRadioElement(element, bindData, context);\n            case 'datetime-local':\n                return new InputDatetimeLocalElement(element, bindData, context);\n            default:\n                return new InputElement(element, bindData, context);\n        }\n    }\n}\n(() => {\n    // register factory instance\n    DataElementRegistry.register('input', new InputElementFactory());\n})();\n//# sourceMappingURL=InputElementFactory.js.map","import { ObjectElement } from \"../ObjectElement\";\nimport { findVariable, getElementAttribute } from \"../common\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nimport { ArrayProxy } from \"../ArrayProxy\";\nexport class SelectElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        this.defaultOptions = [];\n        // adds event listener\n        this.getHtmlElement().addEventListener('change', () => {\n            let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n            this.notifyObservers(event);\n        }, true);\n        // stores default option\n        for (let i = 0; i < this.getHtmlElement().options.length; i++) {\n            this.defaultOptions.push(this.getHtmlElement().options[i]);\n        }\n        // option property\n        let optionName = getElementAttribute(this.getHtmlElement(), 'option');\n        if (optionName) {\n            this.option = findVariable(this.getContext(), optionName);\n            this.optionValueProperty = getElementAttribute(this.getHtmlElement(), 'option-value-property');\n            this.optionTextProperty = getElementAttribute(this.getHtmlElement(), 'option-text-property');\n            ArrayProxy.getHandler(this.option).addObserver(this);\n            this.updateOptions();\n        }\n    }\n    updateOptions() {\n        let value = this.getHtmlElement().value;\n        this.getHtmlElement().innerHTML = '';\n        this.defaultOptions.forEach(defaultOption => {\n            this.getHtmlElement().appendChild(defaultOption);\n        });\n        this.option.forEach(data => {\n            let option = document.createElement('option');\n            option.value = data[this.optionValueProperty];\n            option.appendChild(document.createTextNode(data[this.optionTextProperty]));\n            this.getHtmlElement().appendChild(option);\n        });\n        this.getHtmlElement().value = value;\n    }\n    update(observable, dataEvent) {\n        super.update(observable, dataEvent);\n        if (this.option) {\n            this.updateOptions();\n        }\n    }\n    setValue(value) {\n        this.getHtmlElement().value = value;\n        // force select option\n        if (!value) {\n            for (let i = 0; i < this.getHtmlElement().options.length; i++) {\n                let option = this.getHtmlElement().options[i];\n                if (!option.nodeValue) {\n                    option.selected = true;\n                    break;\n                }\n            }\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (!value || value.trim().length < 1) {\n            value = null;\n        }\n        return value;\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            console.warn(\"==ok\");\n            this.getHtmlElement().style.pointerEvents = 'none';\n        }\n        else {\n            this.getHtmlElement().style.pointerEvents = '';\n        }\n    }\n    setDisable(disable) {\n        if (disable) {\n            this.getHtmlElement().setAttribute('disabled', 'disabled');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('disabled');\n        }\n    }\n}\n//# sourceMappingURL=SelectElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { SelectElement } from \"./SelectElement\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nexport class SelectElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        return new SelectElement(element, bindData, context);\n    }\n}\n(() => {\n    // register factory instance\n    DataElementRegistry.register('select', new SelectElementFactory());\n})();\n//# sourceMappingURL=SelectElementFactory.js.map","import { ObjectElement } from \"../ObjectElement\";\nimport { PropertyChangeEvent } from \"../event/PropertyChangeEvent\";\nexport class TextareaElement extends ObjectElement {\n    constructor(element, bindData, context) {\n        super(element, bindData, context);\n        // adds change event listener\n        this.getHtmlElement().addEventListener('change', e => {\n            let event = new PropertyChangeEvent(this, this.getProperty(), this.getValue(), this.getIndex());\n            this.notifyObservers(event);\n        }, true);\n    }\n    setValue(value) {\n        if (value != null) {\n            this.getHtmlElement().value = value;\n        }\n        else {\n            this.getHtmlElement().value = '';\n        }\n    }\n    getValue() {\n        let value = this.getHtmlElement().value;\n        if (value != null && value.length > 0) {\n            return value;\n        }\n        else {\n            return null;\n        }\n    }\n    setReadonly(readonly) {\n        if (readonly) {\n            this.getHtmlElement().setAttribute('readonly', 'readonly');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('readonly');\n        }\n    }\n    setDisable(disable) {\n        if (disable) {\n            this.getHtmlElement().setAttribute('disabled', 'disabled');\n        }\n        else {\n            this.getHtmlElement().removeAttribute('disabled');\n        }\n    }\n}\n//# sourceMappingURL=TextareaElement.js.map","import { ObjectElementFactory } from \"../ObjectElementFactory\";\nimport { TextareaElement } from \"./TextareaElement\";\nimport { DataElementRegistry } from \"../DataElementRegistry\";\nexport class TextareaElementFactory extends ObjectElementFactory {\n    createElement(element, bindData, context) {\n        return new TextareaElement(element, bindData, context);\n    }\n}\n(() => {\n    // register\n    DataElementRegistry.register('textarea', new TextareaElementFactory());\n})();\n//# sourceMappingURL=TextareaElementFactory.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport class Dialog {\n    constructor(dialogElement) {\n        this.dialogElement = dialogElement;\n        let _this = this;\n        // dialog fixed style\n        this.dialogElement.style.position = 'absolute';\n        this.dialogElement.style.left = '0';\n        this.dialogElement.style.right = '0';\n        this.dialogElement.style.overflowX = 'hidden';\n        this.dialogElement.style.boxSizing = 'border-box';\n        this.dialogElement.style.maxWidth = '100%';\n        // header\n        this.header = document.createElement('div');\n        this.dialogElement.appendChild(this.header);\n        this.header.style.display = 'flex';\n        this.header.style.justifyContent = 'end';\n        this.header.style.lineHeight = '2rem';\n        this.header.style.position = 'absolute';\n        this.header.style.left = '0';\n        this.header.style.top = '0';\n        this.header.style.width = '100%';\n        this.header.style.cursor = 'pointer';\n        // drag\n        this.header.onmousedown = function (event) {\n            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n            pos3 = event.clientX;\n            pos4 = event.clientY;\n            window.document.onmouseup = function (event) {\n                window.document.onmousemove = null;\n                window.document.onmouseup = null;\n            };\n            window.document.onmousemove = function (event) {\n                pos1 = pos3 - event.clientX;\n                pos2 = pos4 - event.clientY;\n                pos3 = event.clientX;\n                pos4 = event.clientY;\n                _this.dialogElement.style.left = (_this.dialogElement.offsetLeft - pos1) + 'px';\n                _this.dialogElement.style.top = (_this.dialogElement.offsetTop - pos2) + 'px';\n            };\n        };\n        // creates close button\n        this.closeButton = document.createElement('span');\n        this.closeButton.innerHTML = '&#10005;';\n        this.closeButton.style.fontFamily = 'monospace';\n        this.closeButton.style.fontSize = 'large';\n        this.closeButton.style.marginLeft = '0.5rem';\n        this.closeButton.style.marginRight = '0.5rem';\n        this.closeButton.addEventListener('click', event => {\n            _this.hide();\n            _this.close();\n        });\n        this.dialogElement.addEventListener('scroll', () => {\n            const scrollTop = this.dialogElement.scrollTop;\n            this.header.style.top = `${scrollTop}px`;\n        });\n        this.header.appendChild(this.closeButton);\n        // on resize event\n        window.addEventListener('resize', function (event) {\n            _this.moveToCenterPosition();\n        });\n    }\n    onOpening(listener) {\n        this.openingListener = listener;\n        return this;\n    }\n    onOpened(listener) {\n        this.openedListener = listener;\n        return this;\n    }\n    onClosing(listener) {\n        this.closingListener = listener;\n        return this;\n    }\n    onClosed(listener) {\n        this.closedListener = listener;\n        return this;\n    }\n    moveToCenterPosition() {\n        let computedStyle = window.getComputedStyle(this.dialogElement);\n        this.dialogElement.style.boxSizing = 'border-box';\n        let computedWidth = this.dialogElement.offsetWidth;\n        let computedHeight = this.dialogElement.offsetHeight;\n        let scrollX = window.scrollX;\n        let scrollY = window.scrollY;\n        this.dialogElement.style.left = Math.max(0, window.innerWidth / 2 - computedWidth / 2) + scrollX + 'px';\n        this.dialogElement.style.top = Math.max(0, window.innerHeight / 3 - computedHeight / 3) + scrollY + 'px';\n    }\n    getDialogElement() {\n        return this.dialogElement;\n    }\n    show() {\n        // saves current scroll position\n        let scrollX = window.scrollX;\n        let scrollY = window.scrollY;\n        // show dialog modal\n        this.dialogElement.style.opacity = '0';\n        window.document.body.appendChild(this.dialogElement);\n        this.dialogElement.showModal();\n        // restore previous scroll position\n        window.scrollTo(scrollX, scrollY);\n        // adjusting position\n        this.moveToCenterPosition();\n        // fade in\n        let _this = this;\n        (function fade() {\n            let val = parseFloat(_this.dialogElement.style.opacity);\n            if (!((val += .1) > 1)) {\n                _this.dialogElement.style.opacity = String(val);\n                requestAnimationFrame(fade);\n            }\n        })();\n    }\n    hide() {\n        // closes modal\n        this.dialogElement.close();\n    }\n    open() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // opening listener\n            if (this.openingListener) {\n                if (this.openingListener.call(this) == false) {\n                    return;\n                }\n            }\n            // show modal\n            this.show();\n            // opened listener\n            if (this.openedListener) {\n                this.openedListener.call(this);\n            }\n            // creates promise\n            let _this = this;\n            this.promise = new Promise(function (resolve, reject) {\n                _this.promiseResolve = resolve;\n                _this.promiseReject = reject;\n            });\n            return this.promise;\n        });\n    }\n    close(...args) {\n        // closing listener\n        if (this.closingListener) {\n            if (this.closingListener.call(this) == false) {\n                return;\n            }\n        }\n        // closed listener\n        if (this.closedListener) {\n            this.closedListener.call(this);\n        }\n        // resolve\n        this.hide();\n        this.promiseResolve(...args);\n    }\n}\n//# sourceMappingURL=Dialog.js.map","import { Initializer } from \"./Initializer\";\n// export class\nexport * from \"./common\";\nexport * from \"./Configuration\";\nexport * from \"./Initializer\";\nexport * from \"./ArrayProxy\";\nexport * from \"./ObjectProxy\";\nexport * from \"./DataElementRegistry\";\nexport * from \"./ObjectElement\";\nexport * from \"./ObjectElementFactory\";\nexport * from \"./ArrayElement\";\nexport * from \"./ArrayElementFactory\";\nexport * from \"./CustomElement\";\nexport * from \"./CustomElementFactory\";\nexport * from \"./element/ImgElementFactory\";\nexport * from \"./element/InputElementFactory\";\nexport * from \"./element/SelectElementFactory\";\nexport * from \"./element/TextareaElementFactory\";\nexport * from \"./dialog/Dialog\";\nexport * from \"./dialog/AlertDialog\";\nexport * from \"./dialog/ConfirmDialog\";\nexport * from \"./dialog/PromptDialog\";\nexport * from \"./tab/TabFolder\";\nexport * from \"./tab/TabItem\";\n// initializes\n(function () {\n    // listen DOMContentLoaded\n    if (globalThis.document) {\n        document.addEventListener(\"DOMContentLoaded\", event => {\n            Initializer.initialize(document.documentElement, {});\n        });\n    }\n    // listen history event and forward to DOMContentLoaded event\n    if (globalThis.window) {\n        ['popstate', 'pageshow'].forEach(event => {\n            window.addEventListener(event, (e) => {\n                if (event === 'pageshow' && !e.persisted)\n                    return;\n                document.dispatchEvent(new CustomEvent('DOMContentLoaded'));\n            });\n        });\n    }\n})();\n//# sourceMappingURL=index.js.map","import { Dialog } from \"./Dialog\";\nexport class AlertDialog extends Dialog {\n    constructor(message) {\n        super(document.createElement('dialog'));\n        this.getDialogElement().style.padding = '1rem';\n        this.getDialogElement().style.minWidth = '20rem';\n        this.getDialogElement().style.textAlign = 'center';\n        // message pre\n        this.messagePre = document.createElement('pre');\n        this.messagePre.style.whiteSpace = 'pre-wrap';\n        this.messagePre.style.marginTop = '1rem';\n        this.messagePre.style.marginBottom = '1rem';\n        this.messagePre.innerHTML = message;\n        this.getDialogElement().appendChild(this.messagePre);\n        // confirm button\n        this.confirmButton = document.createElement('button');\n        this.confirmButton.appendChild(document.createTextNode('OK'));\n        this.confirmButton.style.width = '5em';\n        this.confirmButton.style.cursor = 'pointer';\n        this.confirmButton.addEventListener('click', event => {\n            this.confirm();\n        });\n        this.getDialogElement().appendChild(this.confirmButton);\n    }\n    open() {\n        let promise = super.open();\n        this.confirmButton.focus();\n        return promise;\n    }\n    confirm() {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    close() {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n}\n//# sourceMappingURL=AlertDialog.js.map","import { Dialog } from \"./Dialog\";\nexport class ConfirmDialog extends Dialog {\n    constructor(message) {\n        super(document.createElement('dialog'));\n        this.getDialogElement().style.padding = '1rem';\n        this.getDialogElement().style.minWidth = '20rem';\n        this.getDialogElement().style.textAlign = 'center';\n        // message pre\n        this.messagePre = document.createElement('pre');\n        this.messagePre.style.whiteSpace = 'pre-wrap';\n        this.messagePre.style.marginTop = '1rem';\n        this.messagePre.style.marginBottom = '1rem';\n        this.messagePre.innerHTML = message;\n        this.getDialogElement().appendChild(this.messagePre);\n        // cancel button\n        this.cancelButton = document.createElement('button');\n        this.cancelButton.appendChild(document.createTextNode('Cancel'));\n        this.cancelButton.style.width = '5em';\n        this.cancelButton.style.cursor = 'pointer';\n        this.cancelButton.addEventListener('click', event => {\n            this.cancel();\n        });\n        this.getDialogElement().appendChild(this.cancelButton);\n        // divider\n        this.getDialogElement().appendChild(document.createTextNode(' '));\n        // confirm button\n        this.confirmButton = document.createElement('button');\n        this.confirmButton.appendChild(document.createTextNode('OK'));\n        this.confirmButton.style.width = '5em';\n        this.confirmButton.style.cursor = 'pointer';\n        this.confirmButton.addEventListener('click', event => {\n            this.confirm();\n        });\n        this.getDialogElement().appendChild(this.confirmButton);\n    }\n    open() {\n        let promise = super.open();\n        this.confirmButton.focus();\n        return promise;\n    }\n    close(...args) {\n        super.close(false);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    confirm() {\n        super.close(true);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    cancel() {\n        super.close(false);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n}\n//# sourceMappingURL=ConfirmDialog.js.map","import { DataElement } from \"./DataElement\";\nimport { runExecuteCode, runIfCode } from \"./common\";\nimport { Initializer } from \"./Initializer\";\nimport { DataHandler } from \"./DataHandler\";\nexport class CustomElement extends DataElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n    }\n    render() {\n        // do render\n        this.doRender(this.getBindData());\n        // check if\n        runIfCode(this.getHtmlElement(), this.getContext());\n        // initialize\n        Initializer.initialize(this.getHtmlElement(), this.getContext());\n        // execute script\n        runExecuteCode(this.getHtmlElement(), this.getContext());\n    }\n    update(observable, event) {\n        if (observable instanceof DataHandler) {\n            this.doUpdate(observable.getTarget());\n        }\n    }\n}\n//# sourceMappingURL=CustomElement.js.map","import { Dialog } from \"./Dialog\";\nexport class PromptDialog extends Dialog {\n    constructor(message, type) {\n        super(document.createElement('dialog'));\n        this.getDialogElement().style.padding = '1rem';\n        this.getDialogElement().style.minWidth = '20rem';\n        this.getDialogElement().style.textAlign = 'center';\n        // message pre\n        this.messagePre = document.createElement('pre');\n        this.messagePre.style.whiteSpace = 'pre-wrap';\n        this.messagePre.style.marginTop = '1rem';\n        this.messagePre.style.marginBottom = '1rem';\n        this.messagePre.innerHTML = message;\n        this.getDialogElement().appendChild(this.messagePre);\n        // prompt input\n        this.promptInput = document.createElement('input');\n        this.promptInput.style.textAlign = 'center';\n        this.promptInput.style.marginBottom = '1rem';\n        this.promptInput.style.width = '100%';\n        if (type) {\n            this.promptInput.type = type;\n        }\n        this.getDialogElement().appendChild(this.promptInput);\n        // cancel button\n        this.cancelButton = document.createElement('button');\n        this.cancelButton.appendChild(document.createTextNode('Cancel'));\n        this.cancelButton.style.width = '5em';\n        this.cancelButton.style.cursor = 'pointer';\n        this.cancelButton.addEventListener('click', event => {\n            this.cancel();\n        });\n        this.getDialogElement().appendChild(this.cancelButton);\n        // divider\n        this.getDialogElement().appendChild(document.createTextNode(' '));\n        // confirm button\n        this.confirmButton = document.createElement('button');\n        this.confirmButton.appendChild(document.createTextNode('OK'));\n        this.confirmButton.style.width = '5em';\n        this.confirmButton.style.cursor = 'pointer';\n        this.confirmButton.addEventListener('click', event => {\n            this.confirm(this.promptInput.value);\n        });\n        this.getDialogElement().appendChild(this.confirmButton);\n    }\n    open() {\n        let promise = super.open();\n        this.promptInput.focus();\n        return promise;\n    }\n    close(...args) {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    confirm(value) {\n        super.close(value);\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n    cancel() {\n        super.close();\n        this.getDialogElement().parentNode.removeChild(this.getDialogElement());\n    }\n}\n//# sourceMappingURL=PromptDialog.js.map","export class TabFolder {\n    constructor() {\n        this.items = [];\n    }\n    addItem(item) {\n        item.setTabFolder(this);\n        item.setTabIndex(this.items.length);\n        this.items.push(item);\n    }\n    setActive(index) {\n        for (let i = 0; i < this.items.length; i++) {\n            this.items[i].setActive(i === index);\n        }\n    }\n}\n//# sourceMappingURL=TabFolder.js.map","export class TabItem {\n    constructor(button, content, listener) {\n        this.button = button;\n        this.content = content;\n        this.listener = listener;\n        // default style\n        button.style.cursor = 'pointer';\n        // add listener\n        let _this = this;\n        button.addEventListener('click', () => {\n            _this.tabFolder.setActive(_this.tabIndex);\n        });\n        // set de-active\n        this.setActive(false);\n    }\n    setTabFolder(tabFolder) {\n        this.tabFolder = tabFolder;\n    }\n    setTabIndex(tabIndex) {\n        this.tabIndex = tabIndex;\n    }\n    setActive(active) {\n        if (active) {\n            this.button.style.opacity = 'unset';\n            this.content.removeAttribute('hidden');\n            this.listener.call(this);\n        }\n        else {\n            this.button.style.opacity = '0.5';\n            this.content.setAttribute('hidden', String(true));\n        }\n    }\n}\n//# sourceMappingURL=TabItem.js.map"],"names":["Configuration","setNamespace","value","this","namespace","getNamespace","getElementQuerySelector","markInitialized","container","querySelectorAll","forEach","element","setElementAttribute","findVariable","context","name","object","Function","call","ignore","console","warn","runCode","code","htmlElement","args","values","property","push","e","error","runIfCode","ifClause","getElementAttribute","result","hidden","runExecuteCode","script","hasElementAttribute","hasAttribute","getAttribute","setAttribute","assert","condition","message","Error","DataElementFactory","Observable","constructor","observers","notifyEnabled","addObserver","observer","removeObserver","i","size","length","splice","suspendNotify","resumeNotify","notifyObservers","dataEvent","update","DataElement","bindData","_a","super","generateId","dataHandler","globalThis","Object","getOwnPropertyDescriptor","replace","c","r","Math","random","toString","getHtmlElement","getContext","getBindData","DataEvent","source","DataHandler","readonlyAll","readonly","Set","disableAll","disable","listenerEnabled","setTarget","target","getTarget","setReadonlyAll","clear","isReadonlyAll","setReadonly","add","delete","isReadonly","has","setDisableAll","isDisableAll","setDisable","isDisable","suspendListener","resumeListener","checkListener","listener","event","StringFormat","pattern","format","encodedValue","patternChars","split","valueChars","valueCharsPosition","patternChar","parse","decodedValue","NumberFormat","scale","number","isNaN","Number","string","String","toFixed","reg","test","DateFormat","patternRex","date","Date","$1","getFullYear","padStart","getMonth","getDate","getHours","getMinutes","getSeconds","match","exec","formatString","formatIndex","index","formatLength","matchValue","substr","padEnd","fullYear","parseInt","setFullYear","yyValue","floor","monthValue","setMonth","dateValue","setDate","hoursValue","setHours","minutesValue","setMinutes","secondsValue","setSeconds","tzo","getTimezoneOffset","dif","pad","num","abs","FormatFactory","getFormat","map","arg","trim","startsWith","ObjectElement","getProperty","render","checkIf","objectHandler","ObjectProxy","getHandler","getValue","setValue","executeScript","assign","bind","bindSplit","observable","debug","ObjectHandler","innerText","getIndex","focus","PropertyChangeEvent","get","receiver","Reflect","set","propertyChangingListener","propertyChangedListener","ItemInsertEvent","items","getItems","ItemSelectEvent","ItemMoveEvent","fromIndex","toIndex","getFromIndex","getToIndex","ItemDeleteEvent","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","apply","ArrayHandler","_this","includes","rows","arguments","insertItem","arguments_1","start","deleteCount","deleteRows","insertRows","deleteItem","ArrayElement","selectedItemIndex","arrayProxy","arrayHandler","ArrayProxy","proxyTarget","objectProxy","rowInsertingListener","rowInsertedListener","sliceBegin","sliceEnd","slice","rowDeletingListener","spliceStart","spliceDeleteCount","rowDeletedListener","appendItem","selectItem","rowSelectEvent","getSelectedItemIndex","Array","array","isProxy","isArray","Proxy","setHandler","save","hasOwnProperty","defineProperty","writable","handler","onPropertyChanging","onPropertyChanged","origin","JSON","stringify","reset","onRowInserting","onRowInserted","onRowDeleting","onRowDeleted","keys","cloneNode","editable","slot","document","createElement","itemHtmlElements","loop","hierarchy","selectedItemClass","replaceWith","rowElement","parentNode","removeChild","loopArgs","itemName","statusName","hierarchyArray","idName","parentIdName","visit","parentId","depth","count","first","last","createItemHtmlElement","id","itemHtmlElement","Initializer","initialize","insertBefore","addEventListener","dataTransfer","setData","preventDefault","stopPropagation","getData","itemMoveEvent","classList","remove","currentTarget","el","dataset","duiceIndex","ArrayElementFactory","CustomElementFactory","doCreateElement","ObjectElementFactory","DataElementRegistry","register","tagName","elementFactory","arrayElementFactories","objectElementFactories","customElementFactories","customElements","define","HTMLElement","getFactory","toLowerCase","defaultArrayElementFactory","defaultObjectElementFactory","Map","_b","bindName","undefined","ImgElement","closeButtonImg","window","btoa","originSrc","src","style","cursor","changeImage","clearButton","width","height","hideClearImageButton","clearImage","showClearImageButton","relatedTarget","sizeArgs","nextSibling","position","zIndex","input","fileReader","FileReader","files","image","convertImage","readAsDataURL","click","dataUrl","canvas","ctx","Image","onload","drawImage","naturalWidth","naturalHeight","toDataURL","pointerEvents","ImgElementFactory","InputElement","readOnly","removeAttribute","InputNumberElement","textAlign","key","InputCheckboxElement","trueValue","falseValue","checked","disableClick","removeEventListener","InputDatetimeLocalElement","dateFormat","toISOString","InputRadioElement","InputElementFactory","SelectElement","defaultOptions","options","optionName","option","optionValueProperty","optionTextProperty","updateOptions","innerHTML","defaultOption","appendChild","data","createTextNode","nodeValue","selected","SelectElementFactory","TextareaElement","TextareaElementFactory","Dialog","dialogElement","left","right","overflowX","boxSizing","maxWidth","header","display","justifyContent","lineHeight","top","onmousedown","pos1","pos2","pos3","pos4","clientX","clientY","onmouseup","onmousemove","offsetLeft","offsetTop","closeButton","fontFamily","fontSize","marginLeft","marginRight","hide","close","scrollTop","moveToCenterPosition","onOpening","openingListener","onOpened","openedListener","onClosing","closingListener","onClosed","closedListener","getComputedStyle","computedWidth","offsetWidth","computedHeight","offsetHeight","scrollX","scrollY","max","innerWidth","innerHeight","getDialogElement","show","opacity","body","showModal","scrollTo","fade","val","parseFloat","requestAnimationFrame","open","promise","promiseResolve","promiseReject","documentElement","persisted","dispatchEvent","CustomEvent","padding","minWidth","messagePre","whiteSpace","marginTop","marginBottom","confirmButton","confirm","cancelButton","cancel","doRender","doUpdate","type","promptInput","addItem","item","setTabFolder","setTabIndex","setActive","button","content","tabFolder","tabIndex","active"],"mappings":";;;;;;mCAAO,MAAMA,EACT,mBAAOC,CAAaC,GAChBC,KAAKC,UAAYF,CACpB,CACD,mBAAOG,GACH,OAAOF,KAAKC,SACf,ECLE,SAASE,IACZ,IAAIF,EAAYJ,EAAcK,eAC9B,MAAO,UAAUD,qBAA6BA,QAClD,CACO,SAASG,EAAgBC,GAC5BA,EAAUC,iBAAiBH,KAA2BI,SAAQC,IAC1DC,EAAoBD,EAAS,KAAM,IAAI,GAE/C,CACO,SAASE,EAAaC,EAASC,GAElC,IACI,IAAIC,EAAS,IAAIC,SAAS,eAAeF,MAASG,KAAKJ,GACvD,GAAIE,EACA,OAAOA,CAEd,CACD,MAAOG,GAAW,CAElB,IACI,IAAIH,EAAS,IAAIC,SAAS,UAAUF,MAASG,KAAK,MAClD,GAAIF,EACA,OAAOA,CAEd,CACD,MAAOG,GAAW,CAElBC,QAAQC,KAAK,UAAUN,kBAE3B,CACO,SAASO,EAAQC,EAAMC,EAAaV,GACvC,IACI,IAAIW,EAAO,GACPC,EAAS,GACb,IAAK,IAAIC,KAAYb,EACjBW,EAAKG,KAAKD,GACVD,EAAOE,KAAKd,EAAQa,IAExB,OAAOV,YAAYQ,EAAMF,GAAML,KAAKM,KAAgBE,EACvD,CACD,MAAOG,GAEH,MADAT,QAAQU,MAAMP,EAAMM,GACdA,CACT,CACL,CACO,SAASE,EAAUP,EAAaV,GACnC,IAAIkB,EAAWC,EAAoBT,EAAa,MAChD,GAAIQ,EAAU,CACV,IAAIE,EAASZ,EAAQU,EAAUR,EAAaV,GAKxCU,EAAYW,QAJXD,CAMR,CACL,CACO,SAASE,EAAeZ,EAAaV,GACxC,IAAIuB,EAASJ,EAAoBT,EAAa,WAC1Ca,GACAf,EAAQe,EAAQb,EAAaV,EAErC,CACO,SAASwB,EAAoBd,EAAaT,GAC7C,IAAIX,EAAYJ,EAAcK,eAC9B,OAAOmB,EAAYe,aAAa,QAAQnC,KAAaW,IACzD,CACO,SAASkB,EAAoBT,EAAaT,GAC7C,IAAIX,EAAYJ,EAAcK,eAC9B,OAAOmB,EAAYgB,aAAa,QAAQpC,KAAaW,IACzD,CACO,SAASH,EAAoBY,EAAaT,EAAMb,GACnD,IAAIE,EAAYJ,EAAcK,eAC9BmB,EAAYiB,aAAa,QAAQrC,KAAaW,IAAQb,EAC1D,CACO,SAASwC,EAAOC,EAAWC,GAE9B,GADAxB,QAAQsB,OAAOC,EAAWC,IACrBD,EACD,MAAM,IAAIE,MAAMD,GAAW,mBAEnC,CDzEA5C,EAAcI,UAAY,QERnB,MAAM0C,GCAN,MAAMC,EACT,WAAAC,GACI7C,KAAK8C,UAAY,GACjB9C,KAAK+C,eAAgB,CACxB,CACD,WAAAC,CAAYC,GACRjD,KAAK8C,UAAUrB,KAAKwB,EACvB,CACD,cAAAC,CAAeD,GACX,IAAK,IAAIE,EAAI,EAAGC,EAAOpD,KAAK8C,UAAUO,OAAQF,EAAIC,EAAMD,IACpD,GAAInD,KAAK8C,UAAUK,KAAOF,EAEtB,YADAjD,KAAK8C,UAAUQ,OAAOH,EAAG,EAIpC,CACD,aAAAI,GACIvD,KAAK+C,eAAgB,CACxB,CACD,YAAAS,GACIxD,KAAK+C,eAAgB,CACxB,CACD,eAAAU,CAAgBC,GACR1D,KAAK+C,eACL/C,KAAK8C,UAAUvC,SAAQ0C,IACnBA,EAASU,OAAO3D,KAAM0D,EAAU,GAG3C,EC1BE,MAAME,UAAoBhB,EAC7B,WAAAC,CAAYxB,EAAawC,EAAUlD,GAC/B,IAAImD,EACJC,QACA/D,KAAKqB,YAAcA,EACnBrB,KAAK6D,SAAWA,EAChB7D,KAAKW,QAAUA,EACfF,EAAoBT,KAAKqB,YAAa,KAAMrB,KAAKgE,cAEjD,IAAIC,EAAgG,QAAjFH,EAAKI,WAAWC,OAAOC,yBAAyBpE,KAAK6D,SAAU,oBAAiC,IAAPC,OAAgB,EAASA,EAAG/D,MACxIwC,EAAO0B,EAAa,4BACpBjE,KAAKgD,YAAYiB,GACjBA,EAAYjB,YAAYhD,KAC3B,CACD,UAAAgE,GACI,MAAO,uCAAuCK,QAAQ,SAAS,SAAUC,GACrE,IAAIC,EAAoB,GAAhBC,KAAKC,SAAgB,EAC7B,OADyC,KAALH,EAAWC,EAAS,EAAJA,EAAU,GACrDG,SAAS,GAC9B,GACK,CACD,cAAAC,GACI,OAAO3E,KAAKqB,WACf,CACD,UAAAuD,GACI,OAAO5E,KAAKW,OACf,CACD,WAAAkE,GACI,OAAO7E,KAAK6D,QACf,EC9BE,MAAMiB,EACT,WAAAjC,CAAYkC,GACR/E,KAAK+E,OAASA,CACjB,ECDE,MAAMC,UAAoBpC,EAC7B,WAAAC,GACIkB,QACA/D,KAAKiF,aAAc,EACnBjF,KAAKkF,SAAW,IAAIC,IACpBnF,KAAKoF,YAAa,EAClBpF,KAAKqF,QAAU,IAAIF,IACnBnF,KAAKsF,iBAAkB,CAC1B,CACD,SAAAC,CAAUC,GACNxF,KAAKwF,OAASA,CACjB,CACD,SAAAC,GACI,OAAOzF,KAAKwF,MACf,CACD,cAAAE,CAAeR,GACXlF,KAAKiF,YAAcC,EACdA,GACDlF,KAAKkF,SAASS,QAElB3F,KAAKyD,gBAAgB,IAAIqB,EAAU9E,MACtC,CACD,aAAA4F,GACI,OAAO5F,KAAKiF,WACf,CACD,WAAAY,CAAYrE,EAAU0D,GACdA,EACAlF,KAAKkF,SAASY,IAAItE,GAGlBxB,KAAKkF,SAASa,OAAOvE,GAEzBxB,KAAKyD,gBAAgB,IAAIqB,EAAU9E,MACtC,CACD,UAAAgG,CAAWxE,GACP,OAAOxB,KAAKiF,aAAejF,KAAKkF,SAASe,IAAIzE,EAChD,CACD,aAAA0E,CAAcb,GACVrF,KAAKoF,WAAaC,EACbA,GACDrF,KAAKqF,QAAQM,QAEjB3F,KAAKyD,gBAAgB,IAAIqB,EAAU9E,MACtC,CACD,YAAAmG,GACI,OAAOnG,KAAKoF,UACf,CACD,UAAAgB,CAAW5E,EAAU6D,GACbA,EACArF,KAAKqF,QAAQS,IAAItE,GAGjBxB,KAAKqF,QAAQU,OAAOvE,GAExBxB,KAAKyD,gBAAgB,IAAIqB,EAAU9E,MACtC,CACD,SAAAqG,CAAU7E,GACN,OAAOxB,KAAKoF,YAAcpF,KAAKqF,QAAQY,IAAIzE,EAC9C,CACD,eAAA8E,GACItG,KAAKsF,iBAAkB,CAC1B,CACD,cAAAiB,GACIvG,KAAKsF,iBAAkB,CAC1B,CACD,aAAAkB,CAAcC,EAAUC,GACpB,GAAI1G,KAAKsF,iBAAmBmB,EAAU,CAElC,GAAc,GADDA,EAAS1F,KAAKf,KAAKyF,YAAaiB,GAEzC,OAAO,CAEd,CACD,OAAO,CACV,EC3EE,MAAMC,EACT,WAAA9D,CAAY+D,GACR5G,KAAK4G,QAAUA,CAClB,CACD,MAAAC,CAAO9G,GACH,IAAKA,EACD,OAAOA,EAEX,IAAI+G,EAAe,GACfC,EAAe/G,KAAK4G,QAAQI,MAAM,IAClCC,EAAalH,EAAMiH,MAAM,IACzBE,EAAqB,EACzB,IAAK,IAAI/D,EAAI,EAAGC,EAAO2D,EAAa1D,OAAQF,EAAIC,EAAMD,IAAK,CACvD,IAAIgE,EAAcJ,EAAa5D,GAO/B,GALI2D,GADgB,MAAhBK,EACgBF,EAAWC,MAAyB,GAGpCC,EAEhBD,GAAsBD,EAAW5D,OACjC,KAEP,CACD,OAAOyD,CACV,CACD,KAAAM,CAAMrH,GACF,IAAKA,EACD,OAAOA,EAEX,IAAIsH,EAAe,GACfN,EAAe/G,KAAK4G,QAAQI,MAAM,IAClCC,EAAalH,EAAMiH,MAAM,IACzBE,EAAqB,EACzB,IAAK,IAAI/D,EAAI,EAAGC,EAAO2D,EAAa1D,OAAQF,EAAIC,EAAMD,IAAK,CAEnC,MADF4D,EAAa5D,GAE3BkE,GAAgBJ,EAAWC,MAAyB,GAGpDA,GAEP,CACD,OAAOG,CACV,EC5CE,MAAMC,EACT,WAAAzE,CAAY0E,GACRvH,KAAKuH,MAAQ,EACbvH,KAAKuH,MAAQA,CAChB,CACD,MAAAV,CAAOW,GACH,GAAIC,MAAMC,OAAOF,IACb,MAAO,GAGX,IAAIG,EADJH,EAASE,OAAOF,GAGZG,EADA3H,KAAKuH,MAAQ,EACJK,OAAOJ,EAAOK,QAAQ7H,KAAKuH,QAG3BK,OAAOJ,GAEpB,IAAIM,EAAM,qBACV,KAAOA,EAAIC,KAAKJ,IACZA,EAASA,EAAOtD,QAAQyD,EAAK,SAEjC,OAAOH,CACV,CACD,KAAAP,CAAMO,GACF,IAAKA,EACD,OAAO,KAMX,GAJsB,IAAlBA,EAAOtE,QAAgB,OAAO0E,KAAKJ,KACnCA,GAAU,KAEdA,EAASA,EAAOtD,QAAQ,MAAO,IAC3BoD,MAAMC,OAAOC,IACb,KAAM,MAEV,IAAIH,EAASE,OAAOC,GAIpB,OAHI3H,KAAKuH,MAAQ,IACbC,EAASE,OAAOF,EAAOK,QAAQ7H,KAAKuH,SAEjCC,CACV,ECvCE,MAAMQ,EACT,WAAAnF,CAAY+D,GACR5G,KAAKiI,WAAa,8BAClBjI,KAAK4G,QAAUA,CAClB,CACD,MAAAC,CAAOc,GACH,IAAKA,EACD,MAAO,GAEX,IAAIO,EAAO,IAAIC,KAAKR,GAuBpB,OAtBAA,EAAS3H,KAAK4G,QAAQvC,QAAQrE,KAAKiI,YAAY,SAAUG,GACrD,OAAQA,GACJ,IAAK,OACD,OAAOF,EAAKG,cAChB,IAAK,KACD,OAAOT,OAAOM,EAAKG,cAAgB,KAAMC,SAAS,EAAG,KACzD,IAAK,KACD,OAAOV,OAAOM,EAAKK,WAAa,GAAGD,SAAS,EAAG,KACnD,IAAK,KACD,OAAOV,OAAOM,EAAKM,WAAWF,SAAS,EAAG,KAC9C,IAAK,KACD,OAAOV,OAAOM,EAAKO,YAAYH,SAAS,EAAG,KAC/C,IAAK,KACD,OAAOV,OAAOM,EAAKO,YAAc,GAAKP,EAAKO,WAAaP,EAAKO,WAAa,IAAIH,SAAS,EAAG,KAC9F,IAAK,KACD,OAAOV,OAAOM,EAAKQ,cAAcJ,SAAS,EAAG,KACjD,IAAK,KACD,OAAOV,OAAOM,EAAKS,cAAcL,SAAS,EAAG,KACjD,QACI,OAAOF,EAE3B,GAEK,CACD,KAAAhB,CAAMO,GACF,IAAKA,EACD,OAAO,KAEX,IACIiB,EADAV,EAAO,IAAIC,KAAK,EAAG,EAAG,EAAG,EAAG,EAAG,GAEnC,KAAuD,OAA/CS,EAAQ5I,KAAKiI,WAAWY,KAAK7I,KAAK4G,WAAmB,CACzD,IAAIkC,EAAeF,EAAM,GACrBG,EAAcH,EAAMI,MACpBC,EAAeH,EAAazF,OAC5B6F,EAAavB,EAAOwB,OAAOJ,EAAaE,GAE5C,OADAC,EAAaA,EAAWE,OAAOH,EAAc,KACrCH,GACJ,IAAK,OAAQ,CACT,IAAIO,EAAWC,SAASJ,GACxBhB,EAAKqB,YAAYF,GACjB,KACH,CACD,IAAK,KAAM,CACP,IAAIG,EAAUF,SAASJ,GAEnBG,EAAwB,IADX7E,KAAKiF,OAAM,IAAItB,MAAOE,cAAgB,KACrBmB,EAClCtB,EAAKqB,YAAYF,GACjB,KACH,CACD,IAAK,KAAM,CACP,IAAIK,EAAaJ,SAASJ,GAC1BhB,EAAKyB,SAASD,EAAa,GAC3B,KACH,CACD,IAAK,KAAM,CACP,IAAIE,EAAYN,SAASJ,GACzBhB,EAAK2B,QAAQD,GACb,KACH,CACD,IAAK,KAAM,CACP,IAAIE,EAAaR,SAASJ,GAC1BhB,EAAK6B,SAASD,GACd,KACH,CACD,IAAK,KAAM,CACP,IAAIA,EAAaR,SAASJ,GAC1BhB,EAAK6B,SAASD,EAAa,GAAMA,EAAa,GAAMA,GACpD,KACH,CACD,IAAK,KAAM,CACP,IAAIE,EAAeV,SAASJ,GAC5BhB,EAAK+B,WAAWD,GAChB,KACH,CACD,IAAK,KAAM,CACP,IAAIE,EAAeZ,SAASJ,GAC5BhB,EAAKiC,WAAWD,GAChB,KACH,EAER,CAED,IAAIE,GAAwC,GAAlC,IAAIjC,MAAOkC,oBAA0BC,EAAMF,GAAO,EAAI,IAAM,IAAKG,EAAM,SAAUC,GACvF,OAAQA,EAAM,GAAK,IAAM,IAAMA,CAC3C,EAEQ,OAAOtC,EAAKG,cACR,IAAMkC,EAAIrC,EAAKK,WAAa,GAC5B,IAAMgC,EAAIrC,EAAKM,WACf,IAAM+B,EAAIrC,EAAKO,YACf,IAAM8B,EAAIrC,EAAKQ,cACf,IAAM6B,EAAIrC,EAAKS,cACf2B,EAAMC,EAAI/F,KAAKiF,MAAMjF,KAAKiG,IAAIL,GAAO,KACrC,IAAMG,EAAI/F,KAAKiG,IAAIL,GAAO,GACjC,ECrGE,MAAMM,EACT,gBAAOC,CAAU9D,GAEb,IAAIvF,EACJ,MAAMsH,EAAQ/B,EAAO+B,MAAM,sCAK3B,OAJIA,IACOA,EAAM,GACbtH,EAAOsH,EAAM,GAAG5B,MAAM,KAAK4D,KAAIC,GAAOA,EAAIC,OAAOzG,QAAQ,eAAgB,OAEzEwC,EAAOkE,WAAW,UACX,IAAIpE,EAAarF,EAAK,IAE7BuF,EAAOkE,WAAW,UACX,IAAIzD,EAAahG,EAAK,IAE7BuF,EAAOkE,WAAW,QACX,IAAI/C,EAAW1G,EAAK,IAExB,IACV,ECjBE,MAAM0J,UAAsBpH,EAC/B,WAAAf,CAAYxB,EAAawC,EAAUlD,GAC/BoD,MAAM1C,EAAawC,EAAUlD,GAE7BX,KAAKwB,SAAWM,EAAoBT,EAAa,YACjD,IAAIwF,EAAS/E,EAAoBT,EAAa,UAC1CwF,IACA7G,KAAK6G,OAAS6D,EAAcC,UAAU9D,GAE7C,CACD,WAAAoE,GACI,OAAOjL,KAAKwB,QACf,CACD,SAAAmJ,GACI,OAAO3K,KAAK6G,MACf,CACD,MAAAqE,GAGI,GADAlL,KAAKmL,UACDnL,KAAKwB,SAAU,CACf,IAAI4J,EAAgBC,EAAYC,WAAWtL,KAAK6E,eAE5C9E,EAAQqL,EAAcG,SAASvL,KAAKwB,UACxCxB,KAAKwL,SAASzL,GAEd,IAAImF,EAAWkG,EAAcpF,WAAWhG,KAAKwB,UAC7CxB,KAAK6F,YAAYX,GAEjB,IAAIG,EAAU+F,EAAc/E,UAAUrG,KAAKwB,UAC3CxB,KAAKoG,WAAWf,EACnB,CAEDrF,KAAKyL,eACR,CACD,OAAAN,GACI,IAAIxK,EAAUwD,OAAOuH,OAAO,CAAE,EAAE1L,KAAK4E,cACjC+G,EAAO7J,EAAoB9B,KAAK2E,iBAAkB,QAClDiH,EAAYD,EAAK3E,MAAM,KACvB4E,EAAUvI,OAAS,EACnB1C,EAAQiL,EAAU,IAAMlL,EAAaC,EAASiL,EAAU,IAGxDjL,EAAQgL,GAAQ3L,KAAK6E,cAEzBjD,EAAU5B,KAAKqB,YAAaV,EAC/B,CACD,aAAA8K,GACI,IAAI9K,EAAUwD,OAAOuH,OAAO,CAAE,EAAE1L,KAAK4E,cACjC+G,EAAO7J,EAAoB9B,KAAK2E,iBAAkB,QAClDiH,EAAYD,EAAK3E,MAAM,KACvB4E,EAAUvI,OAAS,EACnB1C,EAAQiL,EAAU,IAAMlL,EAAaC,EAASiL,EAAU,IAGxDjL,EAAQgL,GAAQ3L,KAAK6E,cAEzB5C,EAAejC,KAAKqB,YAAaV,EACpC,CACD,MAAAgD,CAAOkI,EAAYnF,GACfzF,QAAQ6K,MAAM,uBAAwBD,EAAYnF,GAE9CmF,aAAsBE,IAEtB/L,KAAKmL,UACDnL,KAAKwB,WAELxB,KAAKwL,SAASK,EAAWN,SAASvL,KAAKwB,WAEvCxB,KAAK6F,YAAYgG,EAAW7F,WAAWhG,KAAKwB,WAE5CxB,KAAKoG,WAAWyF,EAAWxF,UAAUrG,KAAKwB,YAG9CxB,KAAKyL,gBAEZ,CACD,QAAAD,CAASzL,GACQ,MAATA,GACAA,EAAQC,KAAK2K,YAAc3K,KAAK2K,YAAY9D,OAAO9G,GAASA,EAC5DC,KAAKqB,YAAY2K,UAAYjM,GAG7BC,KAAKqB,YAAY2K,UAAY,EAEpC,CACD,QAAAT,GACI,IAAIxL,EAAQC,KAAKqB,YAAY2K,UAO7B,OALIjM,EADAA,GAASA,EAAM+K,OAAOzH,OAAS,EACvBrD,KAAK2K,YAAc3K,KAAK2K,YAAYvD,MAAMrH,GAASA,EAGnD,KAELA,CACV,CACD,WAAA8F,CAAYX,GAEX,CACD,UAAAkB,CAAWf,GAEV,CACD,QAAA4G,GACI,IAAIjD,EAAQlH,EAAoB9B,KAAKqB,YAAa,SAClD,GAAI2H,EACA,OAAOtB,OAAOsB,EAErB,CACD,KAAAkD,GAEI,OAAO,CACV,EClHE,MAAMC,UAA4BrH,EACrC,WAAAjC,CAAYkC,EAAQvD,EAAUzB,EAAOiJ,GACjCjF,MAAMgB,GACN/E,KAAKwB,SAAWA,EAChBxB,KAAKD,MAAQA,EACbC,KAAKgJ,MAAQA,CAChB,CACD,WAAAiC,GACI,OAAOjL,KAAKwB,QACf,CACD,QAAA+J,GACI,OAAOvL,KAAKD,KACf,CACD,QAAAkM,GACI,OAAOjM,KAAKgJ,KACf,ECbE,MAAM+C,UAAsB/G,EAC/B,WAAAnC,GACIkB,OACH,CACD,GAAAqI,CAAI5G,EAAQhE,EAAU6K,GAClB,OAAOC,QAAQF,IAAI5G,EAAQhE,EAAU6K,EACxC,CACD,GAAAE,CAAI/G,EAAQhE,EAAUzB,GAElBuM,QAAQC,IAAI/G,EAAQhE,EAAUzB,GAE9B,IAAI2G,EAAQ,IAAIyF,EAAoBnM,KAAMwB,EAAUzB,GAGpD,OAFAC,KAAKyD,gBAAgBiD,IAEd,CACV,CACD,MAAA/C,CAAOkI,EAAYnF,GAGf,GAFAzF,QAAQ6K,MAAM,uBAAwBD,EAAYnF,GAE9CmF,aAAsBb,EAAe,CACrC,IAAIxJ,EAAWqK,EAAWZ,cACtBlL,EAAQ8L,EAAWN,WACnBvL,KAAKwG,cAAcxG,KAAKwM,yBAA0B9F,KAClD1G,KAAKwL,SAAShK,EAAUzB,GACxBC,KAAKwG,cAAcxG,KAAKyM,wBAAyB/F,GAExD,CAED1G,KAAKyD,gBAAgBiD,EACxB,CACD,QAAA6E,CAAS/J,GAEL,OADAA,EAAWA,EAAS6C,QAAQ,IAAK,MAC1B,IAAIvD,SAAS,eAAeU,MAAaT,KAAKf,KAAKyF,YAC7D,CACD,QAAA+F,CAAShK,EAAUzB,GACf,IAAIe,SAAS,QAAS,QAAQU,cAAqBT,KAAKf,KAAKyF,YAAa1F,EAC7E,CACD,KAAAmM,CAAM1K,GACFxB,KAAK8C,UAAUvC,SAAQ0C,IACnB,GAAIA,aAAoB+H,GAChB/H,EAASgI,gBAAkBzJ,GACvByB,EAASiJ,QACT,OAAO,CAGlB,GAER,ECjDE,MAAMQ,UAAwB5H,EACjC,WAAAjC,CAAYkC,EAAQiE,EAAO2D,GACvB5I,MAAMgB,GACN/E,KAAK2M,MAAQ,GACb3M,KAAKgJ,MAAQA,EACbhJ,KAAK2M,MAAQA,CAChB,CACD,QAAAV,GACI,OAAOjM,KAAKgJ,KACf,CACD,QAAA4D,GACI,OAAO5M,KAAK2M,KACf,ECZE,MAAME,UAAwB/H,EACjC,WAAAjC,CAAYkC,EAAQiE,GAChBjF,MAAMgB,GACN/E,KAAKgJ,MAAQA,CAChB,CACD,QAAAiD,GACI,OAAOjM,KAAKgJ,KACf,ECPE,MAAM8D,UAAsBhI,EAC/B,WAAAjC,CAAYkC,EAAQgI,EAAWC,GAC3BjJ,MAAMgB,GACN/E,KAAK+M,UAAYA,EACjB/M,KAAKgN,QAAUA,CAClB,CACD,YAAAC,GACI,OAAOjN,KAAK+M,SACf,CACD,UAAAG,GACI,OAAOlN,KAAKgN,OACf,ECXE,MAAMG,UAAwBrI,EACjC,WAAAjC,CAAYkC,EAAQiE,EAAO2D,GACvB5I,MAAMgB,GACN/E,KAAK2M,MAAQ,GACb3M,KAAKgJ,MAAQA,EACbhJ,KAAK2M,MAAQA,CAChB,CACD,QAAAV,GACI,OAAOjM,KAAKgJ,KACf,CACD,QAAA4D,GACI,OAAO5M,KAAK2M,KACf,ECbL,IAAIS,EAAapN,QAAQA,OAAKoN,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU7N,GAAS,IAAM8N,EAAKL,EAAUM,KAAK/N,GAAQ,CAAG,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC3F,SAASqM,EAAShO,GAAS,IAAM8N,EAAKL,EAAiB,MAAEzN,GAAU,CAAC,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC9F,SAASmM,EAAK9L,GAJlB,IAAehC,EAIagC,EAAOiM,KAAON,EAAQ3L,EAAOhC,QAJ1CA,EAIyDgC,EAAOhC,MAJhDA,aAAiBwN,EAAIxN,EAAQ,IAAIwN,GAAE,SAAUG,GAAWA,EAAQ3N,EAAO,KAIhBkO,KAAKL,EAAWG,EAAY,CAC9GF,GAAML,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKQ,OACtE,GACA,EAUO,MAAMK,UAAqBnJ,EAC9B,WAAAnC,GACIkB,OACH,CACD,GAAAqI,CAAI5G,EAAQhE,EAAU6K,GAClB,IAAI+B,EAAQpO,KACZ,MAAMD,EAAQyF,EAAOhE,GACrB,MAAqB,mBAAVzB,EAEH,CAAC,OAAQ,WAAWsO,SAAS7M,GACtB,WACH,IAAIwH,EACa,SAAbxH,EACAwH,EAAQqD,EAAiB,OAEP,YAAb7K,IACLwH,EAAQ,GAEZ,IAAIsF,EAAO,GACX,IAAK,IAAInL,KAAKoL,UACVD,EAAK7M,KAAK8M,UAAUpL,IAGxB,OADAiL,EAAMI,WAAWhJ,EAAQwD,KAAUsF,GAC5B9I,EAAOnC,MAClC,EAGgB,CAAC,UAAUgL,SAAS7M,GACb,WACH,IAAIiN,EAAcF,UAClB,OAAOnB,EAAUpN,UAAM,OAAQ,GAAQ,YAEnC,IAAI0O,EAAQD,EAAY,GACpBE,EAAcF,EAAY,GAC1BG,EAAa,GACjB,IAAK,IAAIzL,EAAIuL,EAAOvL,EAAKuL,EAAQC,EAAcxL,IAC3CyL,EAAWnN,KAAK+D,EAAOrC,IAE3B,IAAI0L,EAAa,GACjB,IAAK,IAAI1L,EAAI,EAAGA,EAAIsL,EAAYpL,OAAQF,IACpC0L,EAAWpN,KAAKgN,EAAYtL,IAWhC,OARIwL,EAAc,GACdP,EAAMU,WAAWtJ,EAAQkJ,EAAOC,GAGhCE,EAAWxL,OAAS,GACpB+K,EAAMI,WAAWhJ,EAAQkJ,KAAUG,GAGhCD,CAC/B,GACA,EAGgB,CAAC,MAAO,SAASP,SAAS7M,GACnB,WACH,OAAO4L,EAAUpN,UAAM,OAAQ,GAAQ,YACnC,IAAIgJ,EACa,QAAbxH,EACAwH,EAAQqD,EAAiB,OAAI,EAEX,UAAb7K,IACLwH,EAAQ,GAEZ,IAAIsF,EAAO,CAAC9I,EAAOwD,IAEnB,OADAoF,EAAMU,WAAWtJ,EAAQwD,GAClBsF,CAC/B,GACA,EAGmBvO,EAAM4L,KAAKnG,GAGfzF,CACV,CACD,GAAAwM,CAAI/G,EAAQhE,EAAUzB,GAKlB,OAJAuM,QAAQC,IAAI/G,EAAQhE,EAAUzB,GACb,WAAbyB,GACAxB,KAAKyD,gBAAgB,IAAIqB,EAAU9E,QAEhC,CACV,CACD,MAAA2D,CAAOkI,EAAYnF,GAGf,GAFAzF,QAAQ6K,MAAM,sBAAuBD,EAAYnF,GAE7CmF,aAAsBkD,EAAc,CAEpC,GAAIrI,aAAiBmG,EAEjB,YADA7M,KAAKgP,kBAAoBtI,EAAMuF,YAInC,GAAIvF,aAAiBoG,EAAe,CAChC,IAAIjM,EAASb,KAAKyF,YAAYnC,OAAOoD,EAAMuG,eAAgB,GAAG,GAC9DjN,KAAKyF,YAAYnC,OAAOoD,EAAMwG,aAAc,EAAGrM,EAClD,CACJ,CAEDb,KAAKyD,gBAAgBiD,EACxB,CACD,UAAA8H,CAAWS,EAAYjG,KAAUsF,GAC7B,IAAIY,EAAeC,EAAW7D,WAAW2D,GACrCG,EAAcD,EAAW1J,UAAUwJ,GACvCX,EAAK/N,SAAQ,CAACM,EAAQmI,KAClB,GAAsB,iBAAXnI,EAAqB,CAC5B,IAAIwO,EAAc,IAAIhE,EAAYxK,GAC9BuK,EAAgBC,EAAYC,WAAW+D,GAC3CjE,EAAcoB,yBAA2BxM,KAAKwM,yBAC9CpB,EAAcqB,wBAA0BzM,KAAKyM,wBAC7C6B,EAAKtF,GAASqG,CACjB,KAEL,IAAI3I,EAAQ,IAAIgG,EAAgB1M,KAAMgJ,EAAOsF,GACzCY,EAAa1I,cAAc0I,EAAaI,qBAAsB5I,KAC9D0I,EAAY9L,OAAO0F,EAAO,KAAMsF,GAChCY,EAAa1I,cAAc0I,EAAaK,oBAAqB7I,GAC7DwI,EAAazL,gBAAgBiD,GAEpC,CACD,UAAAoI,CAAWG,EAAYjG,EAAO5F,GAC1B,IAAI8L,EAAeC,EAAW7D,WAAW2D,GACrCG,EAAcD,EAAW1J,UAAUwJ,GACnCO,EAAaxG,EACbyG,EAAYrM,EAAO4F,EAAQ5F,EAAO4F,EAAQ,EAC1CsF,EAAOc,EAAYM,MAAMF,EAAYC,GACrC/I,EAAQ,IAAIyG,EAAgBnN,KAAMgJ,EAAOsF,GAC7C,GAAIY,EAAa1I,cAAc0I,EAAaS,oBAAqBjJ,GAAQ,CACrE,IAAIkJ,EAAc5G,EACd6G,EAAqBzM,GAAc,EACvCgM,EAAY9L,OAAOsM,EAAaC,GAChCX,EAAa1I,cAAc0I,EAAaY,mBAAoBpJ,GAC5DwI,EAAazL,gBAAgBiD,EAChC,CACJ,CACD,UAAAqJ,CAAWd,KAAeX,GACtB,IAAItF,EAAQiG,EAAW5L,OACvB,OAAOrD,KAAKwO,WAAWS,EAAYjG,KAAUsF,EAChD,CACD,UAAA0B,CAAWhH,GACPhJ,KAAKgP,kBAAoBhG,EAEzB,IAAIiH,EAAiB,IAAIpD,EAAgB7M,KAAMA,KAAKgP,mBACpDhP,KAAKyD,gBAAgBwM,EACxB,CACD,oBAAAC,GACI,OAAOlQ,KAAKgP,iBACf,ECnKE,MAAMG,UAAmBjL,WAAWiM,MAKvC,WAAAtN,CAAYuN,GAGR,GAFArM,QAEIoL,EAAWkB,QAAQD,GACnB,OAAOA,EAGX,IAAIlB,EAAe,IAAIf,EAEvB,GAAIjK,WAAWiM,MAAMG,QAAQF,GACzB,IAAK,IAAIjN,EAAI,EAAGA,EAAIiN,EAAM/M,OAAQF,IACN,iBAAbiN,EAAMjN,KACbiN,EAAMjN,GAAK,IAAIkI,EAAY+E,EAAMjN,KAK7C,IAAI8L,EAAa,IAAIsB,MAAMH,EAAOlB,GAQlC,OAPAA,EAAa3J,UAAU6K,GAEvBjB,EAAWqB,WAAWvB,EAAYC,GAClCC,EAAW5J,UAAU0J,EAAYmB,GAEjCjB,EAAWsB,KAAKxB,GAETA,CACV,CACD,cAAOoB,CAAQD,GACX,OAAOA,EAAMM,eAAe,WAC/B,CACD,gBAAOnL,CAAU0J,EAAYzJ,GACzBtB,WAAWC,OAAOwM,eAAe1B,EAAY,WAAY,CACrDlP,MAAOyF,EACPoL,UAAU,GAEjB,CACD,gBAAOnL,CAAUwJ,GACb,OAAO/K,WAAWC,OAAOC,yBAAyB6K,EAAY,YAAYlP,KAC7E,CACD,iBAAOyQ,CAAWvB,EAAYC,GAC1BhL,WAAWC,OAAOwM,eAAe1B,EAAY,YAAa,CACtDlP,MAAOmP,EACP0B,UAAU,GAEjB,CACD,iBAAOtF,CAAW2D,GACd,IAAI4B,EAAU3M,WAAWC,OAAOC,yBAAyB6K,EAAY,aAAalP,MAElF,OADAwC,EAAOsO,EAAS,wBACTA,CACV,CAMD,aAAOnF,CAAOuD,EAAYmB,GACtB,IAAIlB,EAAelP,KAAKsL,WAAW2D,GACnC,IAEIC,EAAa5I,kBACb4I,EAAa3L,gBAEb0L,EAAW5L,OAAS,EAEpB,IAAK,IAAI2F,EAAQ,EAAGA,EAAQoH,EAAM/M,OAAQ2F,IAAS,CAC/C,IAAInI,EAASuP,EAAMpH,GAEnB,GAAsB,iBAAXnI,EACP,SAEJ,IAAIwO,EAAc,IAAIhE,EAAYxK,GAClCoO,EAAWjG,GAASqG,EAEpBhE,EAAY3F,eAAe2J,EAAaH,EAAatJ,iBACrDsJ,EAAahK,SAAS3E,SAAQiB,IAC1B6J,EAAYxF,YAAYwJ,EAAa7N,GAAU,EAAK,IAGxD6J,EAAYnF,cAAcmJ,EAAaH,EAAa/I,gBACpD+I,EAAa7J,QAAQ9E,SAAQiB,IACzB6J,EAAYjF,WAAWiJ,EAAa7N,GAAU,EAAK,IAGvD6J,EAAYyF,mBAAmBzB,EAAaH,EAAa1C,0BACzDnB,EAAY0F,kBAAkB1B,EAAaH,EAAazC,wBAC3D,CACJ,CACO,QAEJyC,EAAa3I,iBACb2I,EAAa1L,cAChB,CAED0L,EAAazL,gBAAgB,IAAIqB,EAAU9E,MAC9C,CAKD,YAAO2F,CAAMsJ,GACT,IAAIC,EAAelP,KAAKsL,WAAW2D,GACnC,IAEIC,EAAa5I,kBACb4I,EAAa3L,gBAEb0L,EAAW5L,OAAS,CACvB,CACO,QAEJ6L,EAAa3I,iBACb2I,EAAa1L,cAChB,CAED0L,EAAazL,gBAAgB,IAAIqB,EAAU9E,MAC9C,CAKD,WAAOyQ,CAAKxB,GACR,IAAI+B,EAASC,KAAKC,UAAUjC,GAC5B/K,WAAWC,OAAOwM,eAAe1B,EAAY,WAAY,CACrDlP,MAAOiR,EACPJ,UAAU,GAEjB,CAKD,YAAOO,CAAMlC,GACT,IAAI+B,EAASC,KAAK7J,MAAMlD,WAAWC,OAAOC,yBAAyB6K,EAAY,YAAYlP,OAC3FC,KAAK0L,OAAOuD,EAAY+B,EAC3B,CACD,kBAAOnL,CAAYoJ,EAAYzN,EAAU0D,GACrClF,KAAKsL,WAAW2D,GAAYpJ,YAAYrE,EAAU0D,GAClD+J,EAAW1O,SAAQ8O,IACfhE,EAAYxF,YAAYwJ,EAAa7N,EAAU0D,EAAS,GAE/D,CACD,iBAAOc,CAAWiJ,EAAYzN,GAC1B,OAAOxB,KAAKsL,WAAW2D,GAAYjJ,WAAWxE,EACjD,CACD,qBAAOkE,CAAeuJ,EAAY/J,GAC9BlF,KAAKsL,WAAW2D,GAAYvJ,eAAeR,GAC3C+J,EAAW1O,SAAQ8O,IACfhE,EAAY3F,eAAe2J,EAAanK,EAAS,GAExD,CACD,oBAAOU,CAAcqJ,GACjB,OAAOjP,KAAKsL,WAAW2D,GAAYrJ,eACtC,CACD,iBAAOQ,CAAW6I,EAAYzN,EAAU6D,GACpCrF,KAAKsL,WAAW2D,GAAY7I,WAAW5E,EAAU6D,GACjD4J,EAAW1O,SAAQ8O,IACfhE,EAAYjF,WAAWiJ,EAAa7N,EAAU6D,EAAQ,GAE7D,CACD,gBAAOgB,CAAU4I,EAAYzN,GACzB,OAAOxB,KAAKsL,WAAW2D,GAAY5I,UAAU7E,EAChD,CACD,oBAAO0E,CAAc+I,EAAY5J,GAC7BrF,KAAKsL,WAAW2D,GAAY/I,cAAcb,GAC1C4J,EAAW1O,SAAQ8O,IACfhE,EAAYnF,cAAcmJ,EAAahK,EAAQ,GAEtD,CACD,mBAAOc,CAAa8I,GAChB,OAAOjP,KAAKsL,WAAW2D,GAAY9I,cACtC,CACD,iBAAO6J,CAAWf,EAAYjG,GAC1B,OAAOhJ,KAAKsL,WAAW2D,GAAYe,WAAWhH,EACjD,CACD,2BAAOkH,CAAqBjB,GACxB,OAAOjP,KAAKsL,WAAW2D,GAAYiB,sBACtC,CACD,yBAAOY,CAAmB7B,EAAYxI,GAClCzG,KAAKsL,WAAW2D,GAAYzC,yBAA2B/F,EACvDwI,EAAW1O,SAAQ8O,IACfhE,EAAYC,WAAW+D,GAAa7C,yBAA2B/F,CAAQ,GAE9E,CACD,wBAAOsK,CAAkB9B,EAAYxI,GACjCzG,KAAKsL,WAAW2D,GAAYxC,wBAA0BhG,EACtDwI,EAAW1O,SAAQ8O,IACfhE,EAAYC,WAAW+D,GAAa5C,wBAA0BhG,CAAQ,GAE7E,CACD,qBAAO2K,CAAenC,EAAYxI,GAC9BzG,KAAKsL,WAAW2D,GAAYK,qBAAuB7I,CACtD,CACD,oBAAO4K,CAAcpC,EAAYxI,GAC7BzG,KAAKsL,WAAW2D,GAAYM,oBAAsB9I,CACrD,CACD,oBAAO6K,CAAcrC,EAAYxI,GAC7BzG,KAAKsL,WAAW2D,GAAYU,oBAAsBlJ,CACrD,CACD,mBAAO8K,CAAatC,EAAYxI,GAC5BzG,KAAKsL,WAAW2D,GAAYa,mBAAqBrJ,CACpD,EC7ME,MAAM4E,UAAoBnH,WAAWC,OAKxC,WAAAtB,CAAYhC,GAGR,GAFAkD,QAEIsH,EAAYgF,QAAQxP,GACpB,OAAOA,EAGX,IAAIuK,EAAgB,IAAIW,EAExB,IAAK,IAAInL,KAAQC,EAAQ,CACrB,IAAId,EAAQc,EAAOD,GAEnB,GAAIuP,MAAMG,QAAQvQ,GAAlB,CACI,IAAIkP,EAAa,IAAIE,EAAWpP,GAChCoP,EAAW7D,WAAW2D,GAAYjM,YAAYoI,GAC9CvK,EAAOD,GAAQqO,CAElB,MAED,GAAa,MAATlP,GAAkC,iBAAVA,EAO5Bc,EAAOD,GAAQb,MAPf,CACI,IAAIsP,EAAc,IAAIhE,EAAYtL,GAClCsL,EAAYC,WAAW+D,GAAarM,YAAYoI,GAChDvK,EAAOD,GAAQyO,CAElB,CAGJ,CAED,IAAK,IAAIzO,KAAQC,EACRsD,OAAOqN,KAAK3Q,GAAQwN,SAASzN,WACvBZ,KAAKY,GAIpB,IAAIyO,EAAc,IAAIkB,MAAM1P,EAAQuK,GAQpC,OAPAA,EAAc7F,UAAU1E,GAExBwK,EAAYmF,WAAWnB,EAAajE,GACpCC,EAAY9F,UAAU8J,EAAaxO,GAEnCwK,EAAYoF,KAAKpB,GAEVA,CACV,CACD,cAAOgB,CAAQxP,GACX,OAAOA,EAAO6P,eAAe,WAChC,CACD,gBAAOnL,CAAU8J,EAAa7J,GAC1BtB,WAAWC,OAAOwM,eAAetB,EAAa,WAAY,CACtDtP,MAAOyF,EACPoL,UAAU,GAEjB,CACD,gBAAOnL,CAAU4J,GACb,OAAOnL,WAAWC,OAAOC,yBAAyBiL,EAAa,YAAYtP,KAC9E,CACD,iBAAOyQ,CAAWnB,EAAajE,GAC3BlH,WAAWC,OAAOwM,eAAetB,EAAa,YAAa,CACvDtP,MAAOqL,EACPwF,UAAU,GAEjB,CACD,iBAAOtF,CAAW+D,GACd,IAAIwB,EAAU3M,WAAWC,OAAOC,yBAAyBiL,EAAa,aAAatP,MAEnF,OADAwC,EAAOsO,EAAS,wBACTA,CACV,CAMD,aAAOnF,CAAO2D,EAAaxO,GACvB,IAAIuK,EAAgBpL,KAAKsL,WAAW+D,GACpC,IAEIjE,EAAc9E,kBACd8E,EAAc7H,gBAEd,IAAK,IAAI3C,KAAQC,EAAQ,CACrB,IAAId,EAAQc,EAAOD,GAEnB,GAAIuP,MAAMG,QAAQvQ,GACVoQ,MAAMG,QAAQjB,EAAYzO,IAC1BuO,EAAWzD,OAAO2D,EAAYzO,GAAOb,GAGrCsP,EAAYzO,GAAQ,IAAIuO,EAAWpP,QAK3C,GAAa,MAATA,GAAkC,iBAAVA,EAY5BsP,EAAYzO,GAAQb,OAXhB,GAAyB,MAArBsP,EAAYzO,IAA8C,iBAAtByO,EAAYzO,GAChDyK,EAAYK,OAAO2D,EAAYzO,GAAOb,OAErC,CACD,IAAIsP,EAAc,IAAIhE,EAAYtL,GAClCsL,EAAYC,WAAW+D,GAAarM,YAAYoI,GAChDiE,EAAYzO,GAAQyO,CACvB,CAKR,CACJ,CACO,QAEJjE,EAAc7E,iBACd6E,EAAc5H,cACjB,CAED4H,EAAc3H,gBAAgB,IAAIqB,EAAU9E,MAC/C,CAKD,YAAO2F,CAAM0J,GACT,IAAIjE,EAAgBpL,KAAKsL,WAAW+D,GACpC,IAEIjE,EAAc9E,kBACd8E,EAAc7H,gBAEd,IAAK,IAAI3C,KAAQyO,EAAa,CAC1B,IAAItP,EAAQsP,EAAYzO,GACpBuP,MAAMG,QAAQvQ,GACdoP,EAAWxJ,MAAM5F,GAGR,MAATA,GAAkC,iBAAVA,EAI5BsP,EAAYzO,GAAQ,KAHhByK,EAAY1F,MAAM5F,EAIzB,CACJ,CACO,QAEJqL,EAAc7E,iBACd6E,EAAc5H,cACjB,CAED4H,EAAc3H,gBAAgB,IAAIqB,EAAU9E,MAC/C,CAKD,WAAOyQ,CAAKpB,GACR,IAAI2B,EAASC,KAAKC,UAAU7B,GAC5BnL,WAAWC,OAAOwM,eAAetB,EAAa,WAAY,CACtDtP,MAAOiR,EACPJ,UAAU,GAEjB,CAKD,YAAOO,CAAM9B,GACT,IAAI2B,EAASC,KAAK7J,MAAMlD,WAAWC,OAAOC,yBAAyBiL,EAAa,YAAYtP,OAC5FC,KAAK0L,OAAO2D,EAAa2B,EAC5B,CAOD,kBAAOnL,CAAYwJ,EAAa7N,EAAU0D,GACtClF,KAAKsL,WAAW+D,GAAaxJ,YAAYrE,EAAU0D,EACtD,CAMD,iBAAOc,CAAWqJ,EAAa7N,GAC3B,OAAOxB,KAAKsL,WAAW+D,GAAarJ,WAAWxE,EAClD,CAMD,qBAAOkE,CAAe2J,EAAanK,GAC/BlF,KAAKsL,WAAW+D,GAAa3J,eAAeR,EAC/C,CAKD,oBAAOU,CAAcyJ,GACjB,OAAOrP,KAAKsL,WAAW+D,GAAazJ,eACvC,CAOD,iBAAOQ,CAAWiJ,EAAa7N,EAAU6D,GACrCrF,KAAKsL,WAAW+D,GAAajJ,WAAW5E,EAAU6D,EACrD,CAMD,gBAAOgB,CAAUgJ,EAAa7N,GAC1B,OAAOxB,KAAKsL,WAAW+D,GAAahJ,UAAU7E,EACjD,CAMD,oBAAO0E,CAAcmJ,EAAahK,GAC9BrF,KAAKsL,WAAW+D,GAAanJ,cAAcb,EAC9C,CAKD,mBAAOc,CAAakJ,GAChB,OAAOrP,KAAKsL,WAAW+D,GAAalJ,cACvC,CAMD,YAAO+F,CAAMmD,EAAa7N,GACtBxB,KAAKsL,WAAW+D,GAAanD,MAAM1K,EACtC,CAMD,yBAAOsP,CAAmBzB,EAAa5I,GACnCzG,KAAKsL,WAAW+D,GAAa7C,yBAA2B/F,CAC3D,CAMD,wBAAOsK,CAAkB1B,EAAa5I,GAClCzG,KAAKsL,WAAW+D,GAAa5C,wBAA0BhG,CAC1D,ECvQL,IAAI2G,EAAapN,QAAQA,OAAKoN,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU7N,GAAS,IAAM8N,EAAKL,EAAUM,KAAK/N,GAAQ,CAAG,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC3F,SAASqM,EAAShO,GAAS,IAAM8N,EAAKL,EAAiB,MAAEzN,GAAU,CAAC,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC9F,SAASmM,EAAK9L,GAJlB,IAAehC,EAIagC,EAAOiM,KAAON,EAAQ3L,EAAOhC,QAJ1CA,EAIyDgC,EAAOhC,MAJhDA,aAAiBwN,EAAIxN,EAAQ,IAAIwN,GAAE,SAAUG,GAAWA,EAAQ3N,EAAO,KAIhBkO,KAAKL,EAAWG,EAAY,CAC9GF,GAAML,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKQ,OACtE,GACA,EAQO,MAAMiB,UAAqBnL,EAC9B,WAAAf,CAAYxB,EAAawC,EAAUlD,GAC/BoD,MAAM1C,EAAYoQ,WAAU,GAAO5N,EAAUlD,GAC7CX,KAAK0R,UAAW,EAChB1R,KAAK2R,KAAOC,SAASC,cAAc,QACnC7R,KAAK8R,iBAAmB,GAExB9R,KAAK+R,KAAOjQ,EAAoBT,EAAa,QAC7CrB,KAAKgS,UAAYlQ,EAAoBT,EAAa,aAClDrB,KAAK0R,SAA6D,SAAjD5P,EAAoBT,EAAa,YAClDrB,KAAKiS,kBAAoBnQ,EAAoBT,EAAa,uBAE1DA,EAAY6Q,YAAYlS,KAAK2R,MAE7BvR,EAAgBiB,EACnB,CACD,MAAA6J,GACI,IAAIpH,EACJ,IAAImL,EAAajP,KAAK6E,cAOtB,GALA7E,KAAK8R,iBAAiBvR,SAAQ4R,IAC1BA,EAAWC,WAAWC,YAAYF,EAAW,IAEjDnS,KAAK8R,iBAAiBzO,OAAS,EAE3BrD,KAAK+R,KAAM,CACX,IAAIO,EAAWtS,KAAK+R,KAAK/K,MAAM,KAC3BuL,EAAWD,EAAS,GAAGxH,OACvB0H,EAAoC,QAAtB1O,EAAKwO,EAAS,UAAuB,IAAPxO,OAAgB,EAASA,EAAGgH,OAE5E,GAAI9K,KAAKgS,UAAW,CAChB,IAAIS,EAAiBzS,KAAKgS,UAAUhL,MAAM,KACtC0L,EAASD,EAAe,GACxBE,EAAeF,EAAe,GAElC,MAAMrE,EAAQpO,KAEd,IAAI4S,EAAQ,SAAUxC,EAAOyC,EAAUC,GACnC,IAAK,IAAI9J,EAAQ,EAAGA,EAAQoH,EAAM/M,OAAQ2F,IAAS,CAC/C,MAAMnI,EAASuP,EAAMpH,GACrB,GAAInI,EAAO8R,KAAkBE,EAAU,CAEnC,IAAIlS,EAAUwD,OAAOuH,OAAO,CAAE,EAAE0C,EAAMxJ,cACtCjE,EAAQ4R,GAAY1R,EACpBF,EAAQ6R,GAAc,IAAInH,EAAY,CAClCrC,MAAOA,EACP+J,MAAO/J,EAAQ,EACf5F,KAAM6L,EAAW5L,OACjB2P,MAAkB,IAAVhK,EACRiK,KAAOhE,EAAW5L,QAAU2F,EAAQ,EACpC8J,MAAOA,IAGX1E,EAAM8E,sBAAsBlK,EAAOnI,EAAQF,GAE3C,IAAIwS,EAAKtS,EAAO6R,GAChBE,EAAMxC,EAAO+C,EAAIL,EAAQ,EAC5B,CACJ,CACrB,EAEgBF,EAAM3D,EAAY,KAAM,EAC3B,MAIG,IAAK,IAAIjG,EAAQ,EAAGA,EAAQiG,EAAW5L,OAAQ2F,IAAS,CAEpD,IAAInI,EAASoO,EAAWjG,GAEpBrI,EAAUwD,OAAOuH,OAAO,CAAE,EAAE1L,KAAK4E,cACrCjE,EAAQ4R,GAAY1R,EACpBF,EAAQ6R,GAAc,IAAInH,EAAY,CAClCrC,MAAOA,EACP+J,MAAO/J,EAAQ,EACf5F,KAAM6L,EAAW5L,OACjB2P,MAAkB,IAAVhK,EACRiK,KAAOhE,EAAW5L,QAAU2F,EAAQ,IAGxChJ,KAAKkT,sBAAsBlK,EAAOnI,EAAQF,EAC7C,CAER,KAEI,CAED,IAAIyS,EAAkBpT,KAAK2E,iBAAiB8M,WAAU,GAClD9Q,EAAUwD,OAAOuH,OAAO,CAAE,EAAE1L,KAAK4E,cACrCyO,EAAYC,WAAWF,EAAiBpT,KAAK4E,cAC7C5E,KAAK8R,iBAAiBrQ,KAAK2R,GAG3BpT,KAAK2R,KAAKS,WAAWmB,aAAaH,EAAiBpT,KAAK2R,MAExD/P,EAAUwR,EAAiBzS,GAE3BsB,EAAemR,EAAiBzS,EACnC,CACJ,CACD,qBAAAuS,CAAsBlK,EAAOnI,EAAQF,GAEjC,IAAIyS,EAAkBpT,KAAK2E,iBAAiB8M,WAAU,GAEtDhR,EAAoB2S,EAAiB,QAASpK,EAAMtE,YAEpD,IAAI0J,EAAQpO,KACRA,KAAK0R,WACL0B,EAAgB9Q,aAAa,YAAa,QAC1C8Q,EAAgBI,iBAAiB,aAAa,SAAU9R,GACpD,IAAIqL,EAAYjL,EAAoB9B,KAAM,SAC1C0B,EAAE+R,aAAaC,QAAQ,OAAQ3G,EAC/C,IACYqG,EAAgBI,iBAAiB,YAAY,SAAU9R,GACnDA,EAAEiS,iBACFjS,EAAEkS,iBAClB,IACYR,EAAgBI,iBAAiB,QAAQ,SAAU9R,GAC/C,OAAO0L,EAAUpN,UAAM,OAAQ,GAAQ,YACnC0B,EAAEiS,iBACFjS,EAAEkS,kBACF,IAAI7G,EAAYzD,SAAS5H,EAAE+R,aAAaI,QAAQ,SAC5C7G,EAAU1D,SAASxH,EAAoB9B,KAAM,UAC7C8T,EAAgB,IAAIhH,EAAcsB,EAAOrB,EAAWC,GACxDoB,EAAM3K,gBAAgBqQ,EAC1C,GACA,KAGQT,EAAYC,WAAWF,EAAiBzS,EAASqI,GACjDhJ,KAAK8R,iBAAiBrQ,KAAK2R,GAE3BpT,KAAK2R,KAAKS,WAAWmB,aAAaH,EAAiBpT,KAAK2R,MAExD/P,EAAUwR,EAAiBzS,GAE3BsB,EAAemR,EAAiBzS,GAEhCyS,EAAgBI,iBAAiB,SAAS9R,IAElC1B,KAAKiS,oBACLjS,KAAK8R,iBAAiBvR,SAAQC,IAC1BA,EAAQuT,UAAUC,OAAOhU,KAAKiS,kBAAkB,IAEpDvQ,EAAEuS,cAAcF,UAAUjO,IAAI9F,KAAKiS,mBACnCvQ,EAAEkS,mBAGN,IAAI3D,EAAiB,IAAIpD,EAAgB7M,KAAMgJ,GAC/ChJ,KAAKyD,gBAAgBwM,EAAe,GAE3C,CACD,MAAAtM,CAAOkI,EAAYnF,GAEf,GADAzF,QAAQ6K,MAAM,sBAAuBD,EAAYnF,GAC7CmF,aAAsBsC,EAAc,CAEpC,GAAIzH,aAAiBmG,EAAiB,CAClC,GAAI7M,KAAKiS,kBAAmB,CACxBjS,KAAK8R,iBAAiBvR,SAAQ2T,GAAMA,EAAGH,UAAUC,OAAOhU,KAAKiS,qBACjDvL,EAAMuF,YACL,GACTjM,KAAK8R,iBAAiBvR,SAAQ6S,IACtBA,EAAgBe,QAAQC,aAAe1N,EAAMuF,WAAWvH,YACxD0O,EAAgBW,UAAUjO,IAAI9F,KAAKiS,kBACtC,GAGZ,CACD,MACH,CAEDjS,KAAKkL,QACR,CACJ,EC3LE,MAAMmJ,UAA4B1R,EACrC,aAAAkP,CAAcxQ,EAAawC,EAAUlD,GACjC,OAAO,IAAIoO,EAAa1N,EAAawC,EAAUlD,EAClD,ECJE,MAAM2T,UAA6B3R,EACtC,aAAAkP,CAAcxQ,EAAawC,EAAUlD,GACjC,OAAOX,KAAKuU,gBAAgBlT,EAAawC,EAAUlD,EACtD,ECFE,MAAM6T,UAA6B7R,EACtC,aAAAkP,CAAcxQ,EAAawC,EAAUlD,GACjC,OAAO,IAAIqK,EAAc3J,EAAawC,EAAUlD,EACnD,ECFE,MAAM8T,EACT,eAAOC,CAASC,EAASC,GACjBA,aAA0BP,EAC1BrU,KAAK6U,sBAAsBtI,IAAIoI,EAASC,GAEnCA,aAA0BJ,EAC/BxU,KAAK8U,uBAAuBvI,IAAIoI,EAASC,GAEpCA,aAA0BN,GAC/BtU,KAAK+U,uBAAuBxI,IAAIoI,EAASC,GAGzCD,EAAQtG,SAAS,MACjBnK,WAAW8Q,eAAeC,OAAON,EAAS,cAAcO,cAG/D,CACD,iBAAOC,CAAW9T,EAAawC,EAAUlD,GACrC,IAAIgU,EAAUtT,EAAYsT,QAAQS,cAElC,OAAIpV,KAAK+U,uBAAuB9O,IAAI0O,GACzB3U,KAAK+U,uBAAuB3I,IAAIuI,GAGvCxE,MAAMG,QAAQzM,GACV7D,KAAK6U,sBAAsB5O,IAAI0O,GACxB3U,KAAK6U,sBAAsBzI,IAAIuI,GAEnC3U,KAAKqV,2BAIRrV,KAAK8U,uBAAuB7O,IAAI0O,GACzB3U,KAAK8U,uBAAuB1I,IAAIuI,GAEpC3U,KAAKsV,2BAEnB,EAELb,EAAoBa,4BAA8B,IAAId,EACtDC,EAAoBY,2BAA6B,IAAIhB,EACrDI,EAAoBK,uBAAyB,IAAIS,IACjDd,EAAoBI,sBAAwB,IAAIU,IAChDd,EAAoBM,uBAAyB,IAAIQ,IC5C1C,MAAMlC,EACT,iBAAOC,CAAWjT,EAAWM,EAASqI,GAElC3I,EAAUC,iBAAiBH,KAA2BI,SAAQC,IAC1D,IAAIsD,EAAI0R,EAER,MAAMnU,EAAcb,EACpB,IAAK2B,EAAoBd,EAAa,MAClC,IACI,IAAIoU,EAAW3T,EAAoBT,EAAa,QAC5CwC,EAAWnD,EAAaC,EAAS8U,GACkI,QAAtKD,EAA+E,QAAzE1R,EAAK2Q,EAAoBU,WAAW9T,EAAawC,EAAUlD,UAA6B,IAAPmD,OAAgB,EAASA,EAAG+N,cAAcxQ,EAAawC,EAAUlD,UAA6B,IAAP6U,GAAyBA,EAAGtK,cAE7LwK,IAAV1M,GACAvI,EAAoBY,EAAa,QAAS2H,EAAMtE,WAEvD,CACD,MAAOhD,GACHT,QAAQU,MAAMD,EAAGL,EAAahB,EAAW4Q,KAAKC,UAAUvQ,GAC3D,CACJ,GAGR,ECzBL,IAAIyM,EAAapN,QAAQA,OAAKoN,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU7N,GAAS,IAAM8N,EAAKL,EAAUM,KAAK/N,GAAQ,CAAG,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC3F,SAASqM,EAAShO,GAAS,IAAM8N,EAAKL,EAAiB,MAAEzN,GAAU,CAAC,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC9F,SAASmM,EAAK9L,GAJlB,IAAehC,EAIagC,EAAOiM,KAAON,EAAQ3L,EAAOhC,QAJ1CA,EAIyDgC,EAAOhC,MAJhDA,aAAiBwN,EAAIxN,EAAQ,IAAIwN,GAAE,SAAUG,GAAWA,EAAQ3N,EAAO,KAIhBkO,KAAKL,EAAWG,EAAY,CAC9GF,GAAML,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKQ,OACtE,GACA,EAIO,MAAM6H,UAAmB3K,EAC5B,WAAAnI,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,GACzBX,KAAK0R,UAAW,EAChB1R,KAAK4V,eAAiB,6BAA+BC,OAAOC,KAAK,uiCACjE9V,KAAK+V,UAAYnO,OAAO5H,KAAK2E,iBAAiBqR,KAE9ChW,KAAK0R,SAAuE,SAA3D5P,EAAoB9B,KAAK2E,iBAAkB,YACxD3E,KAAK0R,WAEL1R,KAAK2E,iBAAiBsR,MAAMC,OAAS,UACrClW,KAAK2E,iBAAiB6O,iBAAiB,SAAS9M,IAC5C1G,KAAKmW,aAAa,IAGtBnW,KAAKoW,YAAcxE,SAASC,cAAc,OAC1C7R,KAAKoW,YAAYJ,IAAMhW,KAAK4V,eAC5B5V,KAAKoW,YAAYH,MAAMC,OAAS,UAChClW,KAAKoW,YAAYH,MAAMI,MAAQ,OAC/BrW,KAAKoW,YAAYH,MAAMK,OAAS,OAChCtW,KAAKoW,YAAY5C,iBAAiB,YAAY9M,IAC1C1G,KAAKuW,sBAAsB,IAC5B,GACHvW,KAAKoW,YAAY5C,iBAAiB,SAAS9M,IACvC1G,KAAKwW,YAAY,IAGrBxW,KAAK2E,iBAAiB6O,iBAAiB,aAAa9M,IAChD1G,KAAKyW,sBAAsB,IAC5B,GAEHzW,KAAK2E,iBAAiB6O,iBAAiB,YAAY9M,IAE3CA,EAAMgQ,gBAAkB1W,KAAKoW,aAGjCpW,KAAKuW,sBAAsB,IAC5B,IAGP,IAAInT,EAAOtB,EAAoB9B,KAAK2E,iBAAkB,QACtD,GAAIvB,EAAM,CACN,IAAIuT,EAAWvT,EAAK4D,MAAM,KAC1BhH,KAAKqW,MAAQ/M,SAASqN,EAAS,GAAG7L,QAClC9K,KAAKsW,OAAShN,SAASqN,EAAS,GAAG7L,OACtC,CACJ,CACD,oBAAA2L,GACIzW,KAAK2E,iBAAiByN,WAAWmB,aAAavT,KAAKoW,YAAapW,KAAK2E,iBAAiBiS,aACtF5W,KAAKoW,YAAYH,MAAMY,SAAW,WAClC7W,KAAKoW,YAAYH,MAAMa,OAAS,KACnC,CACD,oBAAAP,GACIvW,KAAK2E,iBAAiByN,WAAWC,YAAYrS,KAAKoW,YACrD,CACD,UAAAI,GACQxW,KAAK+V,UACL/V,KAAK2E,iBAAiBqR,IAAMhW,KAAK+V,UAGjC/V,KAAK2E,iBAAiBqR,IAAM,KAGhC,IAAItP,EAAQ,IAAIyF,EAAoBnM,KAAMA,KAAKiL,cAAejL,KAAKuL,WAAYvL,KAAKiM,YACpFjM,KAAKyD,gBAAgBiD,EACxB,CACD,WAAAyP,GACI,IAAIY,EAAQnF,SAASC,cAAc,SACnCkF,EAAMzU,aAAa,OAAQ,QAC3ByU,EAAMzU,aAAa,SAAU,oCAC7B,IAAI8L,EAAQpO,KACZ+W,EAAMvD,iBAAiB,UAAU,SAAU9R,GACvC,IAAIsV,EAAa,IAAIC,WACjBjX,KAAKkX,OAASlX,KAAKkX,MAAM,KACzBF,EAAWxD,iBAAiB,QAAS9R,GAAM0L,EAAUpN,UAAM,OAAQ,GAAQ,YACvE,IACID,EADAoX,EAAQzV,EAAE8D,OAAOzD,OAGjBhC,EADAqO,EAAMiI,OAASjI,EAAMkI,aACPlI,EAAMgJ,aAAaD,EAAO/I,EAAMiI,MAAOjI,EAAMkI,cAG7ClI,EAAMgJ,aAAaD,GAErC/I,EAAM5C,SAASzL,GAEf,IAAI2G,EAAQ,IAAIyF,EAAoBiC,EAAOA,EAAMnD,cAAemD,EAAM7C,WAAY6C,EAAMnC,YACxFmC,EAAM3K,gBAAgBiD,EACzB,MACDsQ,EAAWK,cAAcrX,KAAKkX,MAAM,KAExCxV,EAAEiS,iBACFjS,EAAEkS,iBACd,IACQmD,EAAMO,OACT,CACD,YAAAF,CAAaG,EAASlB,EAAOC,GACzB,OAAO,IAAI7I,SAAQ,SAAUC,EAASC,GAClC,IACI,IAAI6J,EAAS5F,SAASC,cAAc,UAChC4F,EAAMD,EAAO5S,WAAW,MACxBuS,EAAQ,IAAIO,MAChBP,EAAMQ,OAAS,WACPtB,GAASC,GACTkB,EAAOnB,MAAQA,EACfmB,EAAOlB,OAASA,EAChBmB,EAAIG,UAAUT,EAAO,EAAG,EAAGd,EAAOC,KAGlCkB,EAAOnB,MAAQc,EAAMU,aACrBL,EAAOlB,OAASa,EAAMW,cACtBL,EAAIG,UAAUT,EAAO,EAAG,IAE5B,IAAII,EAAUC,EAAOO,UAAU,aAC/BrK,EAAQ6J,EAC5B,EACgBJ,EAAMnB,IAAMuB,CACf,CACD,MAAO7V,GACHiM,EAAOjM,EACV,CACb,GACK,CACD,QAAA8J,CAASzL,GAEDC,KAAK2E,iBAAiBqR,IADtBjW,GAI4BC,KAAK+V,SAExC,CACD,QAAAxK,GACI,IAAIxL,EAAQC,KAAK2E,iBAAiBqR,IAClC,OAAIjW,IAAUC,KAAK+V,UACR,KAGAhW,CAEd,CACD,WAAA8F,CAAYX,GACRlF,KAAK2E,iBAAiBsR,MAAM+B,cAAiB9S,EAAW,OAAS,OACpE,CACD,UAAAkB,CAAWf,GACPrF,KAAK2E,iBAAiBsR,MAAM+B,cAAiB3S,EAAU,OAAS,OACnE,ECzJE,MAAM4S,UAA0BzD,EACnC,aAAA3C,CAAcrR,EAASqD,EAAUlD,GAC7B,OAAO,IAAIgV,EAAWnV,EAASqD,EAAUlD,EAC5C,EAID8T,EAAoBC,SAAS,MAAO,IAAIuD,GCRrC,MAAMC,UAAqBlN,EAC9B,WAAAnI,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,GAEzBX,KAAK2E,iBAAiB6O,iBAAiB,UAAU9R,IAC7C,IAAIgF,EAAQ,IAAIyF,EAAoBnM,KAAMA,KAAKiL,cAAejL,KAAKuL,WAAYvL,KAAKiM,YACpFjM,KAAKyD,gBAAgBiD,EAAM,IAC5B,GAEH1G,KAAK2E,iBAAiBrC,aAAa,eAAgB,MACtD,CACD,QAAAkJ,CAASzL,GAEDA,EADS,MAATA,EACQC,KAAK2K,YAAc3K,KAAK2K,YAAY9D,OAAO9G,GAASA,EAGpD,GAEZC,KAAK2E,iBAAiB5E,MAAQA,CACjC,CACD,QAAAwL,GACI,IAAIxL,EAAQC,KAAK2E,iBAAiB5E,MAOlC,OALIA,EADAA,EACQC,KAAK2K,YAAc3K,KAAK2K,YAAYvD,MAAMrH,GAASA,EAGnD,KAELA,CACV,CACD,WAAA8F,CAAYX,GACRlF,KAAK2E,iBAAiBwT,SAAWjT,CACpC,CACD,UAAAkB,CAAWf,GACHA,EACArF,KAAK2E,iBAAiBrC,aAAa,WAAY,YAG/CtC,KAAK2E,iBAAiByT,gBAAgB,WAE7C,CACD,KAAAlM,GAEI,OADAlM,KAAK2E,iBAAiBuH,SACf,CACV,EC7CE,MAAMmM,UAA2BH,EACpC,WAAArV,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,GAEzBX,KAAK2E,iBAAiBrC,aAAa,OAAQ,QAC3CtC,KAAK2E,iBAAiBsR,MAAMqC,UAAY,QAExCtY,KAAK2E,iBAAiB6O,iBAAiB,YAAY9M,KACX,IAAhC,YAAYqB,KAAKrB,EAAM6R,MACvB7R,EAAMiN,gBACT,GAER,CACD,QAAApI,GACI,IAAIxL,EAAQgE,MAAMwH,WAClB,OAAO7D,OAAO3H,EACjB,ECfE,MAAMyY,UAA6BN,EACtC,WAAArV,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,GACzBX,KAAKyY,WAAY,EACjBzY,KAAK0Y,YAAa,EAElB,IAAID,EAAY3W,EAAoB9B,KAAK2E,iBAAkB,cAC3D3E,KAAKyY,UAAYA,GAAwBzY,KAAKyY,UAC9C,IAAIC,EAAa5W,EAAoB9B,KAAK2E,iBAAkB,eAC5D3E,KAAK0Y,WAAaA,GAA0B1Y,KAAK0Y,UACpD,CACD,QAAAlN,CAASzL,GACDA,IAAUC,KAAKyY,UACfzY,KAAK2E,iBAAiBgU,SAAU,EAGhC3Y,KAAKqB,YAAYsX,SAAU,CAElC,CACD,QAAApN,GACI,OAAIvL,KAAKqB,YAAYsX,QACV3Y,KAAKyY,UAGLzY,KAAK0Y,UAEnB,CACD,YAAAE,CAAalS,GACTA,EAAMiN,gBACT,CACD,WAAA9N,CAAYX,GACJA,EACAlF,KAAK2E,iBAAiB6O,iBAAiB,QAASxT,KAAK4Y,cAGrD5Y,KAAK2E,iBAAiBkU,oBAAoB,QAAS7Y,KAAK4Y,aAE/D,ECrCE,MAAME,UAAkCZ,EAC3C,WAAArV,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,GACzBX,KAAK+Y,WAAa,IAAI/Q,EAAW,mBACpC,CACD,QAAAwD,CAASzL,GAEDC,KAAK2E,iBAAiB5E,MADtBA,EAC8BC,KAAK+Y,WAAWlS,OAAO9G,GAGvB,EAErC,CACD,QAAAwL,GACI,IAAIxL,EAAQC,KAAK2E,iBAAiB5E,MAClC,OAAIA,EACO,IAAIoI,KAAKpI,GAAOiZ,cAGhB,IAEd,ECtBE,MAAMC,UAA0Bf,EACnC,WAAArV,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,EAC5B,CACD,QAAA6K,CAASzL,GACLC,KAAK2E,iBAAiBgU,QAAW3Y,KAAK2E,iBAAiB5E,QAAUA,CACpE,CACD,QAAAwL,GACI,OAAOvL,KAAK2E,iBAAiB5E,KAChC,CACD,WAAA8F,CAAYX,GAEJlF,KAAK2E,iBAAiBsR,MAAM+B,cAD5B9S,EAC4C,OAGA,EAEnD,ECXE,MAAMgU,UAA4B1E,EACrC,aAAA3C,CAAcrR,EAASqD,EAAUlD,GAE7B,OADWH,EAAQ6B,aAAa,SAE5B,IAAK,SACD,OAAO,IAAIgW,EAAmB7X,EAASqD,EAAUlD,GACrD,IAAK,WACD,OAAO,IAAI6X,EAAqBhY,EAASqD,EAAUlD,GACvD,IAAK,QACD,OAAO,IAAIsY,EAAkBzY,EAASqD,EAAUlD,GACpD,IAAK,iBACD,OAAO,IAAImY,EAA0BtY,EAASqD,EAAUlD,GAC5D,QACI,OAAO,IAAIuX,EAAa1X,EAASqD,EAAUlD,GAEtD,EAID8T,EAAoBC,SAAS,QAAS,IAAIwE,GCtBvC,MAAMC,UAAsBnO,EAC/B,WAAAnI,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,GACzBX,KAAKoZ,eAAiB,GAEtBpZ,KAAK2E,iBAAiB6O,iBAAiB,UAAU,KAC7C,IAAI9M,EAAQ,IAAIyF,EAAoBnM,KAAMA,KAAKiL,cAAejL,KAAKuL,WAAYvL,KAAKiM,YACpFjM,KAAKyD,gBAAgBiD,EAAM,IAC5B,GAEH,IAAK,IAAIvD,EAAI,EAAGA,EAAInD,KAAK2E,iBAAiB0U,QAAQhW,OAAQF,IACtDnD,KAAKoZ,eAAe3X,KAAKzB,KAAK2E,iBAAiB0U,QAAQlW,IAG3D,IAAImW,EAAaxX,EAAoB9B,KAAK2E,iBAAkB,UACxD2U,IACAtZ,KAAKuZ,OAAS7Y,EAAaV,KAAK4E,aAAc0U,GAC9CtZ,KAAKwZ,oBAAsB1X,EAAoB9B,KAAK2E,iBAAkB,yBACtE3E,KAAKyZ,mBAAqB3X,EAAoB9B,KAAK2E,iBAAkB,wBACrEwK,EAAW7D,WAAWtL,KAAKuZ,QAAQvW,YAAYhD,MAC/CA,KAAK0Z,gBAEZ,CACD,aAAAA,GACI,IAAI3Z,EAAQC,KAAK2E,iBAAiB5E,MAClCC,KAAK2E,iBAAiBgV,UAAY,GAClC3Z,KAAKoZ,eAAe7Y,SAAQqZ,IACxB5Z,KAAK2E,iBAAiBkV,YAAYD,EAAc,IAEpD5Z,KAAKuZ,OAAOhZ,SAAQuZ,IAChB,IAAIP,EAAS3H,SAASC,cAAc,UACpC0H,EAAOxZ,MAAQ+Z,EAAK9Z,KAAKwZ,qBACzBD,EAAOM,YAAYjI,SAASmI,eAAeD,EAAK9Z,KAAKyZ,sBACrDzZ,KAAK2E,iBAAiBkV,YAAYN,EAAO,IAE7CvZ,KAAK2E,iBAAiB5E,MAAQA,CACjC,CACD,MAAA4D,CAAOkI,EAAYnI,GACfK,MAAMJ,OAAOkI,EAAYnI,GACrB1D,KAAKuZ,QACLvZ,KAAK0Z,eAEZ,CACD,QAAAlO,CAASzL,GAGL,GAFAC,KAAK2E,iBAAiB5E,MAAQA,GAEzBA,EACD,IAAK,IAAIoD,EAAI,EAAGA,EAAInD,KAAK2E,iBAAiB0U,QAAQhW,OAAQF,IAAK,CAC3D,IAAIoW,EAASvZ,KAAK2E,iBAAiB0U,QAAQlW,GAC3C,IAAKoW,EAAOS,UAAW,CACnBT,EAAOU,UAAW,EAClB,KACH,CACJ,CAER,CACD,QAAA1O,GACI,IAAIxL,EAAQC,KAAK2E,iBAAiB5E,MAIlC,QAHKA,GAASA,EAAM+K,OAAOzH,OAAS,KAChCtD,EAAQ,MAELA,CACV,CACD,WAAA8F,CAAYX,GACJA,GACAjE,QAAQC,KAAK,QACblB,KAAK2E,iBAAiBsR,MAAM+B,cAAgB,QAG5ChY,KAAK2E,iBAAiBsR,MAAM+B,cAAgB,EAEnD,CACD,UAAA5R,CAAWf,GACHA,EACArF,KAAK2E,iBAAiBrC,aAAa,WAAY,YAG/CtC,KAAK2E,iBAAiByT,gBAAgB,WAE7C,EChFE,MAAM8B,UAA6B1F,EACtC,aAAA3C,CAAcrR,EAASqD,EAAUlD,GAC7B,OAAO,IAAIwY,EAAc3Y,EAASqD,EAAUlD,EAC/C,EAID8T,EAAoBC,SAAS,SAAU,IAAIwF,GCRxC,MAAMC,UAAwBnP,EACjC,WAAAnI,CAAYrC,EAASqD,EAAUlD,GAC3BoD,MAAMvD,EAASqD,EAAUlD,GAEzBX,KAAK2E,iBAAiB6O,iBAAiB,UAAU9R,IAC7C,IAAIgF,EAAQ,IAAIyF,EAAoBnM,KAAMA,KAAKiL,cAAejL,KAAKuL,WAAYvL,KAAKiM,YACpFjM,KAAKyD,gBAAgBiD,EAAM,IAC5B,EACN,CACD,QAAA8E,CAASzL,GAEDC,KAAK2E,iBAAiB5E,MADb,MAATA,EAC8BA,EAGA,EAErC,CACD,QAAAwL,GACI,IAAIxL,EAAQC,KAAK2E,iBAAiB5E,MAClC,OAAa,MAATA,GAAiBA,EAAMsD,OAAS,EACzBtD,EAGA,IAEd,CACD,WAAA8F,CAAYX,GACJA,EACAlF,KAAK2E,iBAAiBrC,aAAa,WAAY,YAG/CtC,KAAK2E,iBAAiByT,gBAAgB,WAE7C,CACD,UAAAhS,CAAWf,GACHA,EACArF,KAAK2E,iBAAiBrC,aAAa,WAAY,YAG/CtC,KAAK2E,iBAAiByT,gBAAgB,WAE7C,ECxCE,MAAMgC,UAA+B5F,EACxC,aAAA3C,CAAcrR,EAASqD,EAAUlD,GAC7B,OAAO,IAAIwZ,EAAgB3Z,EAASqD,EAAUlD,EACjD,EAID8T,EAAoBC,SAAS,WAAY,IAAI0F,GCVjD,IAAIhN,EAAapN,QAAQA,OAAKoN,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU7N,GAAS,IAAM8N,EAAKL,EAAUM,KAAK/N,GAAQ,CAAG,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC3F,SAASqM,EAAShO,GAAS,IAAM8N,EAAKL,EAAiB,MAAEzN,GAAU,CAAC,MAAO2B,GAAKiM,EAAOjM,GAAO,CAC9F,SAASmM,EAAK9L,GAJlB,IAAehC,EAIagC,EAAOiM,KAAON,EAAQ3L,EAAOhC,QAJ1CA,EAIyDgC,EAAOhC,MAJhDA,aAAiBwN,EAAIxN,EAAQ,IAAIwN,GAAE,SAAUG,GAAWA,EAAQ3N,EAAO,KAIhBkO,KAAKL,EAAWG,EAAY,CAC9GF,GAAML,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKQ,OACtE,GACA,EACO,MAAMuM,EACT,WAAAxX,CAAYyX,GACRta,KAAKsa,cAAgBA,EACrB,IAAIlM,EAAQpO,KAEZA,KAAKsa,cAAcrE,MAAMY,SAAW,WACpC7W,KAAKsa,cAAcrE,MAAMsE,KAAO,IAChCva,KAAKsa,cAAcrE,MAAMuE,MAAQ,IACjCxa,KAAKsa,cAAcrE,MAAMwE,UAAY,SACrCza,KAAKsa,cAAcrE,MAAMyE,UAAY,aACrC1a,KAAKsa,cAAcrE,MAAM0E,SAAW,OAEpC3a,KAAK4a,OAAShJ,SAASC,cAAc,OACrC7R,KAAKsa,cAAcT,YAAY7Z,KAAK4a,QACpC5a,KAAK4a,OAAO3E,MAAM4E,QAAU,OAC5B7a,KAAK4a,OAAO3E,MAAM6E,eAAiB,MACnC9a,KAAK4a,OAAO3E,MAAM8E,WAAa,OAC/B/a,KAAK4a,OAAO3E,MAAMY,SAAW,WAC7B7W,KAAK4a,OAAO3E,MAAMsE,KAAO,IACzBva,KAAK4a,OAAO3E,MAAM+E,IAAM,IACxBhb,KAAK4a,OAAO3E,MAAMI,MAAQ,OAC1BrW,KAAK4a,OAAO3E,MAAMC,OAAS,UAE3BlW,KAAK4a,OAAOK,YAAc,SAAUvU,GAChC,IAAIwU,EAAO,EAAGC,EAAO,EAAGC,EAAO,EAAGC,EAAO,EACzCD,EAAO1U,EAAM4U,QACbD,EAAO3U,EAAM6U,QACb1F,OAAOjE,SAAS4J,UAAY,SAAU9U,GAClCmP,OAAOjE,SAAS6J,YAAc,KAC9B5F,OAAOjE,SAAS4J,UAAY,IAC5C,EACY3F,OAAOjE,SAAS6J,YAAc,SAAU/U,GACpCwU,EAAOE,EAAO1U,EAAM4U,QACpBH,EAAOE,EAAO3U,EAAM6U,QACpBH,EAAO1U,EAAM4U,QACbD,EAAO3U,EAAM6U,QACbnN,EAAMkM,cAAcrE,MAAMsE,KAAQnM,EAAMkM,cAAcoB,WAAaR,EAAQ,KAC3E9M,EAAMkM,cAAcrE,MAAM+E,IAAO5M,EAAMkM,cAAcqB,UAAYR,EAAQ,IACzF,CACA,EAEQnb,KAAK4b,YAAchK,SAASC,cAAc,QAC1C7R,KAAK4b,YAAYjC,UAAY,WAC7B3Z,KAAK4b,YAAY3F,MAAM4F,WAAa,YACpC7b,KAAK4b,YAAY3F,MAAM6F,SAAW,QAClC9b,KAAK4b,YAAY3F,MAAM8F,WAAa,SACpC/b,KAAK4b,YAAY3F,MAAM+F,YAAc,SACrChc,KAAK4b,YAAYpI,iBAAiB,SAAS9M,IACvC0H,EAAM6N,OACN7N,EAAM8N,OAAO,IAEjBlc,KAAKsa,cAAc9G,iBAAiB,UAAU,KAC1C,MAAM2I,EAAYnc,KAAKsa,cAAc6B,UACrCnc,KAAK4a,OAAO3E,MAAM+E,IAAM,GAAGmB,KAAa,IAE5Cnc,KAAK4a,OAAOf,YAAY7Z,KAAK4b,aAE7B/F,OAAOrC,iBAAiB,UAAU,SAAU9M,GACxC0H,EAAMgO,sBAClB,GACK,CACD,SAAAC,CAAU5V,GAEN,OADAzG,KAAKsc,gBAAkB7V,EAChBzG,IACV,CACD,QAAAuc,CAAS9V,GAEL,OADAzG,KAAKwc,eAAiB/V,EACfzG,IACV,CACD,SAAAyc,CAAUhW,GAEN,OADAzG,KAAK0c,gBAAkBjW,EAChBzG,IACV,CACD,QAAA2c,CAASlW,GAEL,OADAzG,KAAK4c,eAAiBnW,EACfzG,IACV,CACD,oBAAAoc,GACwBvG,OAAOgH,iBAAiB7c,KAAKsa,eACjDta,KAAKsa,cAAcrE,MAAMyE,UAAY,aACrC,IAAIoC,EAAgB9c,KAAKsa,cAAcyC,YACnCC,EAAiBhd,KAAKsa,cAAc2C,aACpCC,EAAUrH,OAAOqH,QACjBC,EAAUtH,OAAOsH,QACrBnd,KAAKsa,cAAcrE,MAAMsE,KAAO/V,KAAK4Y,IAAI,EAAGvH,OAAOwH,WAAa,EAAIP,EAAgB,GAAKI,EAAU,KACnGld,KAAKsa,cAAcrE,MAAM+E,IAAMxW,KAAK4Y,IAAI,EAAGvH,OAAOyH,YAAc,EAAIN,EAAiB,GAAKG,EAAU,IACvG,CACD,gBAAAI,GACI,OAAOvd,KAAKsa,aACf,CACD,IAAAkD,GAEI,IAAIN,EAAUrH,OAAOqH,QACjBC,EAAUtH,OAAOsH,QAErBnd,KAAKsa,cAAcrE,MAAMwH,QAAU,IACnC5H,OAAOjE,SAAS8L,KAAK7D,YAAY7Z,KAAKsa,eACtCta,KAAKsa,cAAcqD,YAEnB9H,OAAO+H,SAASV,EAASC,GAEzBnd,KAAKoc,uBAEL,IAAIhO,EAAQpO,MACZ,SAAU6d,IACN,IAAIC,EAAMC,WAAW3P,EAAMkM,cAAcrE,MAAMwH,UACxCK,GAAO,IAAM,IAChB1P,EAAMkM,cAAcrE,MAAMwH,QAAU7V,OAAOkW,GAC3CE,sBAAsBH,GAE7B,CAND,EAOH,CACD,IAAA5B,GAEIjc,KAAKsa,cAAc4B,OACtB,CACD,IAAA+B,GACI,OAAO7Q,EAAUpN,UAAM,OAAQ,GAAQ,YAEnC,GAAIA,KAAKsc,iBACkC,GAAnCtc,KAAKsc,gBAAgBvb,KAAKf,MAC1B,OAIRA,KAAKwd,OAEDxd,KAAKwc,gBACLxc,KAAKwc,eAAezb,KAAKf,MAG7B,IAAIoO,EAAQpO,KAKZ,OAJAA,KAAKke,QAAU,IAAIzQ,SAAQ,SAAUC,EAASC,GAC1CS,EAAM+P,eAAiBzQ,EACvBU,EAAMgQ,cAAgBzQ,CACtC,IACmB3N,KAAKke,OACxB,GACK,CACD,KAAAhC,IAAS5a,GAEDtB,KAAK0c,iBACkC,GAAnC1c,KAAK0c,gBAAgB3b,KAAKf,QAK9BA,KAAK4c,gBACL5c,KAAK4c,eAAe7b,KAAKf,MAG7BA,KAAKic,OACLjc,KAAKme,kBAAkB7c,GAC1B,SCvIG4C,WAAW0N,UACXA,SAAS4B,iBAAiB,oBAAoB9M,IAC1C2M,EAAYC,WAAW1B,SAASyM,gBAAiB,CAAE,EAAC,IAIxDna,WAAW2R,QACX,CAAC,WAAY,YAAYtV,SAAQmG,IAC7BmP,OAAOrC,iBAAiB9M,GAAQhF,KACd,aAAVgF,GAAyBhF,EAAE4c,YAE/B1M,SAAS2M,cAAc,IAAIC,YAAY,oBAAoB,GAC7D,kBCtCP,cAA0BnE,EAC7B,WAAAxX,CAAYJ,GACRsB,MAAM6N,SAASC,cAAc,WAC7B7R,KAAKud,mBAAmBtH,MAAMwI,QAAU,OACxCze,KAAKud,mBAAmBtH,MAAMyI,SAAW,QACzC1e,KAAKud,mBAAmBtH,MAAMqC,UAAY,SAE1CtY,KAAK2e,WAAa/M,SAASC,cAAc,OACzC7R,KAAK2e,WAAW1I,MAAM2I,WAAa,WACnC5e,KAAK2e,WAAW1I,MAAM4I,UAAY,OAClC7e,KAAK2e,WAAW1I,MAAM6I,aAAe,OACrC9e,KAAK2e,WAAWhF,UAAYlX,EAC5BzC,KAAKud,mBAAmB1D,YAAY7Z,KAAK2e,YAEzC3e,KAAK+e,cAAgBnN,SAASC,cAAc,UAC5C7R,KAAK+e,cAAclF,YAAYjI,SAASmI,eAAe,OACvD/Z,KAAK+e,cAAc9I,MAAMI,MAAQ,MACjCrW,KAAK+e,cAAc9I,MAAMC,OAAS,UAClClW,KAAK+e,cAAcvL,iBAAiB,SAAS9M,IACzC1G,KAAKgf,SAAS,IAElBhf,KAAKud,mBAAmB1D,YAAY7Z,KAAK+e,cAC5C,CACD,IAAAd,GACI,IAAIC,EAAUna,MAAMka,OAEpB,OADAje,KAAK+e,cAAc7S,QACZgS,CACV,CACD,OAAAc,GACIjb,MAAMmY,QACNlc,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,CACD,KAAArB,GACInY,MAAMmY,QACNlc,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,6FCnCE,cAA4BlD,EAC/B,WAAAxX,CAAYJ,GACRsB,MAAM6N,SAASC,cAAc,WAC7B7R,KAAKud,mBAAmBtH,MAAMwI,QAAU,OACxCze,KAAKud,mBAAmBtH,MAAMyI,SAAW,QACzC1e,KAAKud,mBAAmBtH,MAAMqC,UAAY,SAE1CtY,KAAK2e,WAAa/M,SAASC,cAAc,OACzC7R,KAAK2e,WAAW1I,MAAM2I,WAAa,WACnC5e,KAAK2e,WAAW1I,MAAM4I,UAAY,OAClC7e,KAAK2e,WAAW1I,MAAM6I,aAAe,OACrC9e,KAAK2e,WAAWhF,UAAYlX,EAC5BzC,KAAKud,mBAAmB1D,YAAY7Z,KAAK2e,YAEzC3e,KAAKif,aAAerN,SAASC,cAAc,UAC3C7R,KAAKif,aAAapF,YAAYjI,SAASmI,eAAe,WACtD/Z,KAAKif,aAAahJ,MAAMI,MAAQ,MAChCrW,KAAKif,aAAahJ,MAAMC,OAAS,UACjClW,KAAKif,aAAazL,iBAAiB,SAAS9M,IACxC1G,KAAKkf,QAAQ,IAEjBlf,KAAKud,mBAAmB1D,YAAY7Z,KAAKif,cAEzCjf,KAAKud,mBAAmB1D,YAAYjI,SAASmI,eAAe,MAE5D/Z,KAAK+e,cAAgBnN,SAASC,cAAc,UAC5C7R,KAAK+e,cAAclF,YAAYjI,SAASmI,eAAe,OACvD/Z,KAAK+e,cAAc9I,MAAMI,MAAQ,MACjCrW,KAAK+e,cAAc9I,MAAMC,OAAS,UAClClW,KAAK+e,cAAcvL,iBAAiB,SAAS9M,IACzC1G,KAAKgf,SAAS,IAElBhf,KAAKud,mBAAmB1D,YAAY7Z,KAAK+e,cAC5C,CACD,IAAAd,GACI,IAAIC,EAAUna,MAAMka,OAEpB,OADAje,KAAK+e,cAAc7S,QACZgS,CACV,CACD,KAAAhC,IAAS5a,GACLyC,MAAMmY,OAAM,GACZlc,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,CACD,OAAAyB,GACIjb,MAAMmY,OAAM,GACZlc,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,CACD,MAAA2B,GACInb,MAAMmY,OAAM,GACZlc,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,mBC/CE,cAA4B3Z,EAC/B,WAAAf,CAAYxB,EAAawC,EAAUlD,GAC/BoD,MAAM1C,EAAawC,EAAUlD,EAChC,CACD,MAAAuK,GAEIlL,KAAKmf,SAASnf,KAAK6E,eAEnBjD,EAAU5B,KAAK2E,iBAAkB3E,KAAK4E,cAEtCyO,EAAYC,WAAWtT,KAAK2E,iBAAkB3E,KAAK4E,cAEnD3C,EAAejC,KAAK2E,iBAAkB3E,KAAK4E,aAC9C,CACD,MAAAjB,CAAOkI,EAAYnF,GACXmF,aAAsB7G,GACtBhF,KAAKof,SAASvT,EAAWpG,YAEhC,uMCrBE,cAA2B4U,EAC9B,WAAAxX,CAAYJ,EAAS4c,GACjBtb,MAAM6N,SAASC,cAAc,WAC7B7R,KAAKud,mBAAmBtH,MAAMwI,QAAU,OACxCze,KAAKud,mBAAmBtH,MAAMyI,SAAW,QACzC1e,KAAKud,mBAAmBtH,MAAMqC,UAAY,SAE1CtY,KAAK2e,WAAa/M,SAASC,cAAc,OACzC7R,KAAK2e,WAAW1I,MAAM2I,WAAa,WACnC5e,KAAK2e,WAAW1I,MAAM4I,UAAY,OAClC7e,KAAK2e,WAAW1I,MAAM6I,aAAe,OACrC9e,KAAK2e,WAAWhF,UAAYlX,EAC5BzC,KAAKud,mBAAmB1D,YAAY7Z,KAAK2e,YAEzC3e,KAAKsf,YAAc1N,SAASC,cAAc,SAC1C7R,KAAKsf,YAAYrJ,MAAMqC,UAAY,SACnCtY,KAAKsf,YAAYrJ,MAAM6I,aAAe,OACtC9e,KAAKsf,YAAYrJ,MAAMI,MAAQ,OAC3BgJ,IACArf,KAAKsf,YAAYD,KAAOA,GAE5Brf,KAAKud,mBAAmB1D,YAAY7Z,KAAKsf,aAEzCtf,KAAKif,aAAerN,SAASC,cAAc,UAC3C7R,KAAKif,aAAapF,YAAYjI,SAASmI,eAAe,WACtD/Z,KAAKif,aAAahJ,MAAMI,MAAQ,MAChCrW,KAAKif,aAAahJ,MAAMC,OAAS,UACjClW,KAAKif,aAAazL,iBAAiB,SAAS9M,IACxC1G,KAAKkf,QAAQ,IAEjBlf,KAAKud,mBAAmB1D,YAAY7Z,KAAKif,cAEzCjf,KAAKud,mBAAmB1D,YAAYjI,SAASmI,eAAe,MAE5D/Z,KAAK+e,cAAgBnN,SAASC,cAAc,UAC5C7R,KAAK+e,cAAclF,YAAYjI,SAASmI,eAAe,OACvD/Z,KAAK+e,cAAc9I,MAAMI,MAAQ,MACjCrW,KAAK+e,cAAc9I,MAAMC,OAAS,UAClClW,KAAK+e,cAAcvL,iBAAiB,SAAS9M,IACzC1G,KAAKgf,QAAQhf,KAAKsf,YAAYvf,MAAM,IAExCC,KAAKud,mBAAmB1D,YAAY7Z,KAAK+e,cAC5C,CACD,IAAAd,GACI,IAAIC,EAAUna,MAAMka,OAEpB,OADAje,KAAKsf,YAAYpT,QACVgS,CACV,CACD,KAAAhC,IAAS5a,GACLyC,MAAMmY,QACNlc,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,CACD,OAAAyB,CAAQjf,GACJgE,MAAMmY,MAAMnc,GACZC,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,CACD,MAAA2B,GACInb,MAAMmY,QACNlc,KAAKud,mBAAmBnL,WAAWC,YAAYrS,KAAKud,mBACvD,wCC5DE,MACH,WAAA1a,GACI7C,KAAK2M,MAAQ,EAChB,CACD,OAAA4S,CAAQC,GACJA,EAAKC,aAAazf,MAClBwf,EAAKE,YAAY1f,KAAK2M,MAAMtJ,QAC5BrD,KAAK2M,MAAMlL,KAAK+d,EACnB,CACD,SAAAG,CAAU3W,GACN,IAAK,IAAI7F,EAAI,EAAGA,EAAInD,KAAK2M,MAAMtJ,OAAQF,IACnCnD,KAAK2M,MAAMxJ,GAAGwc,UAAUxc,IAAM6F,EAErC,aCbE,MACH,WAAAnG,CAAY+c,EAAQC,EAASpZ,GACzBzG,KAAK4f,OAASA,EACd5f,KAAK6f,QAAUA,EACf7f,KAAKyG,SAAWA,EAEhBmZ,EAAO3J,MAAMC,OAAS,UAEtB,IAAI9H,EAAQpO,KACZ4f,EAAOpM,iBAAiB,SAAS,KAC7BpF,EAAM0R,UAAUH,UAAUvR,EAAM2R,SAAS,IAG7C/f,KAAK2f,WAAU,EAClB,CACD,YAAAF,CAAaK,GACT9f,KAAK8f,UAAYA,CACpB,CACD,WAAAJ,CAAYK,GACR/f,KAAK+f,SAAWA,CACnB,CACD,SAAAJ,CAAUK,GACFA,GACAhgB,KAAK4f,OAAO3J,MAAMwH,QAAU,QAC5Bzd,KAAK6f,QAAQzH,gBAAgB,UAC7BpY,KAAKyG,SAAS1F,KAAKf,QAGnBA,KAAK4f,OAAO3J,MAAMwH,QAAU,MAC5Bzd,KAAK6f,QAAQvd,aAAa,SAAUsF,QAAO,IAElD"}